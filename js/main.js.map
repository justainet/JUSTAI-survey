{
  "version": 3,
  "sources": ["../../dist/_snowpack/pkg/@supabase/supabase-js.js", "../../dist/js/dendro.js", "../../dist/js/wheels.js", "../../dist/js/reshape-data.js", "../../dist/js/main.js"],
  "sourcesContent": ["// constants.ts\nconst DEFAULT_HEADERS = {};\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction getDefaultExportFromCjs (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nfunction createCommonjsModule(fn, basedir, module) {\n\treturn module = {\n\t\tpath: basedir,\n\t\texports: {},\n\t\trequire: function (path, base) {\n\t\t\treturn commonjsRequire(path, (base === undefined || base === null) ? module.path : base);\n\t\t}\n\t}, fn(module, module.exports), module.exports;\n}\n\nfunction commonjsRequire () {\n\tthrow new Error('Dynamic requires are not currently supported by @rollup/plugin-commonjs');\n}\n\nvar browserPonyfill = createCommonjsModule(function (module, exports) {\nvar global = typeof self !== 'undefined' ? self : commonjsGlobal;\nvar __self__ = (function () {\nfunction F() {\nthis.fetch = false;\nthis.DOMException = global.DOMException;\n}\nF.prototype = global;\nreturn new F();\n})();\n(function(self) {\n\nvar irrelevant = (function (exports) {\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n  return exports;\n\n}({}));\n})(__self__);\n__self__.fetch.ponyfill = true;\n// Remove \"polyfill\" property added by whatwg-fetch\ndelete __self__.fetch.polyfill;\n// Choose between native implementation (global) or custom implementation (__self__)\n// var ctx = global.fetch ? global : __self__;\nvar ctx = __self__; // this line disable service worker support temporarily\nexports = ctx.fetch; // To enable: import fetch from 'cross-fetch'\nexports.default = ctx.fetch; // For TypeScript consumers without esModuleInterop.\nexports.fetch = ctx.fetch; // To enable: import {fetch} from 'cross-fetch'\nexports.Headers = ctx.Headers;\nexports.Request = ctx.Request;\nexports.Response = ctx.Response;\nmodule.exports = exports;\n});\n\nvar fetch$1 = /*@__PURE__*/getDefaultExportFromCjs(browserPonyfill);\n\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nconst _getErrorMessage = (err) => err.msg || err.message || err.error_description || err.error || JSON.stringify(err);\nconst handleError = (error, reject) => {\n    if (typeof error.json !== 'function') {\n        return reject(error);\n    }\n    error.json().then((err) => {\n        return reject({\n            message: _getErrorMessage(err),\n            status: (error === null || error === void 0 ? void 0 : error.status) || 500,\n        });\n    });\n};\nconst _getRequestParams = (method, options, body) => {\n    const params = { method, headers: (options === null || options === void 0 ? void 0 : options.headers) || {} };\n    if (method === 'GET') {\n        return params;\n    }\n    params.headers = Object.assign({ 'Content-Type': 'text/plain;charset=UTF-8' }, options === null || options === void 0 ? void 0 : options.headers);\n    params.body = JSON.stringify(body);\n    return params;\n};\nfunction _handleRequest(method, url, options, body) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return new Promise((resolve, reject) => {\n            fetch$1(url, _getRequestParams(method, options, body))\n                .then((result) => {\n                if (!result.ok)\n                    throw result;\n                if (options === null || options === void 0 ? void 0 : options.noResolveJson)\n                    return resolve;\n                return result.json();\n            })\n                .then((data) => resolve(data))\n                .catch((error) => handleError(error, reject));\n        });\n    });\n}\nfunction get(url, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest('GET', url, options);\n    });\n}\nfunction post(url, body, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest('POST', url, options, body);\n    });\n}\nfunction put(url, body, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest('PUT', url, options, body);\n    });\n}\nfunction remove(url, body, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest('DELETE', url, options, body);\n    });\n}\n\nconst GOTRUE_URL = 'http://localhost:9999';\nconst DEFAULT_HEADERS$1 = {};\nconst STORAGE_KEY = 'supabase.auth.token';\nconst COOKIE_OPTIONS = {\n    name: 'sb:token',\n    lifetime: 60 * 60 * 8,\n    domain: '',\n    path: '/',\n    sameSite: 'lax',\n};\n\n/**\n * Serialize data into a cookie header.\n */\nfunction serialize(name, val, options) {\n    const opt = options || {};\n    const enc = encodeURIComponent;\n    const fieldContentRegExp = /^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/;\n    if (typeof enc !== 'function') {\n        throw new TypeError('option encode is invalid');\n    }\n    if (!fieldContentRegExp.test(name)) {\n        throw new TypeError('argument name is invalid');\n    }\n    const value = enc(val);\n    if (value && !fieldContentRegExp.test(value)) {\n        throw new TypeError('argument val is invalid');\n    }\n    let str = name + '=' + value;\n    if (null != opt.maxAge) {\n        const maxAge = opt.maxAge - 0;\n        if (isNaN(maxAge) || !isFinite(maxAge)) {\n            throw new TypeError('option maxAge is invalid');\n        }\n        str += '; Max-Age=' + Math.floor(maxAge);\n    }\n    if (opt.domain) {\n        if (!fieldContentRegExp.test(opt.domain)) {\n            throw new TypeError('option domain is invalid');\n        }\n        str += '; Domain=' + opt.domain;\n    }\n    if (opt.path) {\n        if (!fieldContentRegExp.test(opt.path)) {\n            throw new TypeError('option path is invalid');\n        }\n        str += '; Path=' + opt.path;\n    }\n    if (opt.expires) {\n        if (typeof opt.expires.toUTCString !== 'function') {\n            throw new TypeError('option expires is invalid');\n        }\n        str += '; Expires=' + opt.expires.toUTCString();\n    }\n    if (opt.httpOnly) {\n        str += '; HttpOnly';\n    }\n    if (opt.secure) {\n        str += '; Secure';\n    }\n    if (opt.sameSite) {\n        const sameSite = typeof opt.sameSite === 'string' ? opt.sameSite.toLowerCase() : opt.sameSite;\n        switch (sameSite) {\n            case 'lax':\n                str += '; SameSite=Lax';\n                break;\n            case 'strict':\n                str += '; SameSite=Strict';\n                break;\n            case 'none':\n                str += '; SameSite=None';\n                break;\n            default:\n                throw new TypeError('option sameSite is invalid');\n        }\n    }\n    return str;\n}\n/**\n * Based on the environment and the request we know if a secure cookie can be set.\n */\nfunction isSecureEnvironment(req) {\n    if (!req || !req.headers || !req.headers.host) {\n        throw new Error('The \"host\" request header is not available');\n    }\n    const host = (req.headers.host.indexOf(':') > -1 && req.headers.host.split(':')[0]) || req.headers.host;\n    if (['localhost', '127.0.0.1'].indexOf(host) > -1 || host.endsWith('.local')) {\n        return false;\n    }\n    return true;\n}\n/**\n * Serialize a cookie to a string.\n */\nfunction serializeCookie(cookie, secure) {\n    var _a, _b, _c;\n    return serialize(cookie.name, cookie.value, {\n        maxAge: cookie.maxAge,\n        expires: new Date(Date.now() + cookie.maxAge * 1000),\n        httpOnly: true,\n        secure,\n        path: (_a = cookie.path) !== null && _a !== void 0 ? _a : '/',\n        domain: (_b = cookie.domain) !== null && _b !== void 0 ? _b : '',\n        sameSite: (_c = cookie.sameSite) !== null && _c !== void 0 ? _c : 'lax',\n    });\n}\n/**\n * Set one or more cookies.\n */\nfunction setCookies(req, res, cookies) {\n    const strCookies = cookies.map((c) => serializeCookie(c, isSecureEnvironment(req)));\n    const previousCookies = res.getHeader('Set-Cookie');\n    if (previousCookies) {\n        if (previousCookies instanceof Array) {\n            Array.prototype.push.apply(strCookies, previousCookies);\n        }\n        else if (typeof previousCookies === 'string') {\n            strCookies.push(previousCookies);\n        }\n    }\n    res.setHeader('Set-Cookie', strCookies);\n}\n/**\n * Set one or more cookies.\n */\nfunction setCookie(req, res, cookie) {\n    setCookies(req, res, [cookie]);\n}\nfunction deleteCookie(req, res, name) {\n    setCookie(req, res, {\n        name,\n        value: '',\n        maxAge: -1,\n    });\n}\n\nfunction expiresAt(expiresIn) {\n    const timeNow = Math.round(Date.now() / 1000);\n    return timeNow + expiresIn;\n}\nfunction uuid() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = (Math.random() * 16) | 0, v = c == 'x' ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\nconst isBrowser = () => typeof window !== 'undefined';\nfunction getParameterByName(name, url) {\n    if (!url)\n        url = window.location.href;\n    name = name.replace(/[\\[\\]]/g, '\\\\$&');\n    var regex = new RegExp('[?&#]' + name + '(=([^&#]*)|&|#|$)'), results = regex.exec(url);\n    if (!results)\n        return null;\n    if (!results[2])\n        return '';\n    return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n}\nclass LocalStorage {\n    constructor(localStorage) {\n        this.localStorage = localStorage || globalThis.localStorage;\n    }\n    clear() {\n        return this.localStorage.clear();\n    }\n    key(index) {\n        return this.localStorage.key(index);\n    }\n    setItem(key, value) {\n        return this.localStorage.setItem(key, value);\n    }\n    getItem(key) {\n        return this.localStorage.getItem(key);\n    }\n    removeItem(key) {\n        return this.localStorage.removeItem(key);\n    }\n}\n\nvar __awaiter$1 = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nclass GoTrueApi {\n    constructor({ url = '', headers = {}, cookieOptions, }) {\n        this.url = url;\n        this.headers = headers;\n        this.cookieOptions = Object.assign(Object.assign({}, COOKIE_OPTIONS), cookieOptions);\n    }\n    /**\n     * Creates a new user using their email address.\n     * @param email The email address of the user.\n     * @param password The password of the user.\n     * @param redirectTo A URL or mobile address to send the user to after they are confirmed.\n     *\n     * @returns A logged-in session if the server has \"autoconfirm\" ON\n     * @returns A user if the server has \"autoconfirm\" OFF\n     */\n    signUpWithEmail(email, password, options = {}) {\n        return __awaiter$1(this, void 0, void 0, function* () {\n            try {\n                let headers = Object.assign({}, this.headers);\n                let queryString = '';\n                if (options.redirectTo) {\n                    queryString = '?redirect_to=' + options.redirectTo;\n                }\n                const data = yield post(`${this.url}/signup${queryString}`, { email, password }, { headers });\n                let session = Object.assign({}, data);\n                if (session.expires_in)\n                    session.expires_at = expiresAt(data.expires_in);\n                return { data: session, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    /**\n     * Logs in an existing user using their email address.\n     * @param email The email address of the user.\n     * @param password The password of the user.\n     * @param redirectTo A URL or mobile address to send the user to after they are confirmed.\n     */\n    signInWithEmail(email, password, options = {}) {\n        return __awaiter$1(this, void 0, void 0, function* () {\n            try {\n                let headers = Object.assign({}, this.headers);\n                let queryString = '?grant_type=password';\n                if (options.redirectTo) {\n                    queryString += '&redirect_to=' + options.redirectTo;\n                }\n                const data = yield post(`${this.url}/token${queryString}`, { email, password }, { headers });\n                let session = Object.assign({}, data);\n                if (session.expires_in)\n                    session.expires_at = expiresAt(data.expires_in);\n                return { data: session, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    /**\n     * Sends a magic login link to an email address.\n     * @param email The email address of the user.\n     * @param redirectTo A URL or mobile address to send the user to after they are confirmed.\n     */\n    sendMagicLinkEmail(email, options = {}) {\n        return __awaiter$1(this, void 0, void 0, function* () {\n            try {\n                let headers = Object.assign({}, this.headers);\n                let queryString = '';\n                if (options.redirectTo) {\n                    queryString += '?redirect_to=' + options.redirectTo;\n                }\n                const data = yield post(`${this.url}/magiclink${queryString}`, { email }, { headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    /**\n     * Sends an invite link to an email address.\n     * @param email The email address of the user.\n     * @param redirectTo A URL or mobile address to send the user to after they are confirmed.\n     */\n    inviteUserByEmail(email, options = {}) {\n        return __awaiter$1(this, void 0, void 0, function* () {\n            try {\n                let headers = Object.assign({}, this.headers);\n                let queryString = '';\n                if (options.redirectTo) {\n                    queryString += '?redirect_to=' + options.redirectTo;\n                }\n                const data = yield post(`${this.url}/invite${queryString}`, { email }, { headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    /**\n     * Sends a reset request to an email address.\n     * @param email The email address of the user.\n     * @param redirectTo A URL or mobile address to send the user to after they are confirmed.\n     */\n    resetPasswordForEmail(email, options = {}) {\n        return __awaiter$1(this, void 0, void 0, function* () {\n            try {\n                let headers = Object.assign({}, this.headers);\n                let queryString = '';\n                if (options.redirectTo) {\n                    queryString += '?redirect_to=' + options.redirectTo;\n                }\n                const data = yield post(`${this.url}/recover${queryString}`, { email }, { headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    /**\n     * Create a temporary object with all configured headers and\n     * adds the Authorization token to be used on request methods\n     * @param jwt A valid, logged-in JWT.\n     */\n    _createRequestHeaders(jwt) {\n        const headers = Object.assign({}, this.headers);\n        headers['Authorization'] = `Bearer ${jwt}`;\n        return headers;\n    }\n    /**\n     * Removes a logged-in session.\n     * @param jwt A valid, logged-in JWT.\n     */\n    signOut(jwt) {\n        return __awaiter$1(this, void 0, void 0, function* () {\n            try {\n                yield post(`${this.url}/logout`, {}, { headers: this._createRequestHeaders(jwt), noResolveJson: true });\n                return { error: null };\n            }\n            catch (error) {\n                return { error };\n            }\n        });\n    }\n    /**\n     * Generates the relevant login URL for a third-party provider.\n     * @param provider One of the providers supported by GoTrue.\n     * @param redirectTo A URL or mobile address to send the user to after they are confirmed.\n     * @param scopes A space-separated list of scopes granted to the OAuth application.\n     */\n    getUrlForProvider(provider, options) {\n        let urlParams = [`provider=${provider}`];\n        if (options === null || options === void 0 ? void 0 : options.redirectTo) {\n            urlParams.push(`redirect_to=${options.redirectTo}`);\n        }\n        if (options === null || options === void 0 ? void 0 : options.scopes) {\n            urlParams.push(`scopes=${options.scopes}`);\n        }\n        return `${this.url}/authorize?${urlParams.join('&')}`;\n    }\n    /**\n     * Gets the user details.\n     * @param jwt A valid, logged-in JWT.\n     */\n    getUser(jwt) {\n        return __awaiter$1(this, void 0, void 0, function* () {\n            try {\n                const data = yield get(`${this.url}/user`, { headers: this._createRequestHeaders(jwt) });\n                return { user: data, data, error: null };\n            }\n            catch (error) {\n                return { user: null, data: null, error };\n            }\n        });\n    }\n    /**\n     * Updates the user data.\n     * @param jwt A valid, logged-in JWT.\n     * @param attributes The data you want to update.\n     */\n    updateUser(jwt, attributes) {\n        return __awaiter$1(this, void 0, void 0, function* () {\n            try {\n                const data = yield put(`${this.url}/user`, attributes, {\n                    headers: this._createRequestHeaders(jwt),\n                });\n                return { user: data, data, error: null };\n            }\n            catch (error) {\n                return { user: null, data: null, error };\n            }\n        });\n    }\n    /**\n     * Delete an user.\n     * @param uid The user uid you want to remove.\n     * @param jwt A valid JWT. Must be a full-access API key (e.g. service_role key).\n     */\n    deleteUser(uid, jwt) {\n        return __awaiter$1(this, void 0, void 0, function* () {\n            try {\n                const data = yield remove(`${this.url}/admin/users/${uid}`, {}, {\n                    headers: this._createRequestHeaders(jwt),\n                });\n                return { user: data, data, error: null };\n            }\n            catch (error) {\n                return { user: null, data: null, error };\n            }\n        });\n    }\n    /**\n     * Generates a new JWT.\n     * @param refreshToken A valid refresh token that was returned on login.\n     */\n    refreshAccessToken(refreshToken) {\n        return __awaiter$1(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(`${this.url}/token?grant_type=refresh_token`, { refresh_token: refreshToken }, { headers: this.headers });\n                let session = Object.assign({}, data);\n                if (session.expires_in)\n                    session.expires_at = expiresAt(data.expires_in);\n                return { data: session, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    /**\n     * Set/delete the auth cookie based on the AuthChangeEvent.\n     * Works for Next.js & Express (requires cookie-parser middleware).\n     */\n    setAuthCookie(req, res) {\n        if (req.method !== 'POST') {\n            res.setHeader('Allow', 'POST');\n            res.status(405).end('Method Not Allowed');\n        }\n        const { event, session } = req.body;\n        if (!event)\n            throw new Error('Auth event missing!');\n        if (event === 'SIGNED_IN') {\n            if (!session)\n                throw new Error('Auth session missing!');\n            setCookie(req, res, {\n                name: this.cookieOptions.name,\n                value: session.access_token,\n                domain: this.cookieOptions.domain,\n                maxAge: this.cookieOptions.lifetime,\n                path: this.cookieOptions.path,\n                sameSite: this.cookieOptions.sameSite,\n            });\n        }\n        if (event === 'SIGNED_OUT')\n            deleteCookie(req, res, this.cookieOptions.name);\n        res.status(200).json({});\n    }\n    /**\n     * Get user by reading the cookie from the request.\n     * Works for Next.js & Express (requires cookie-parser middleware).\n     */\n    getUserByCookie(req) {\n        return __awaiter$1(this, void 0, void 0, function* () {\n            try {\n                if (!req.cookies)\n                    throw new Error('Not able to parse cookies! When using Express make sure the cookie-parser middleware is in use!');\n                if (!req.cookies[this.cookieOptions.name])\n                    throw new Error('No cookie found!');\n                const token = req.cookies[this.cookieOptions.name];\n                const { user, error } = yield this.getUser(token);\n                if (error)\n                    throw error;\n                return { user, data: user, error: null };\n            }\n            catch (error) {\n                return { user: null, data: null, error };\n            }\n        });\n    }\n}\n\n// @ts-nocheck\n/**\n * https://mathiasbynens.be/notes/globalthis\n */\nfunction polyfillGlobalThis() {\n    if (typeof globalThis === 'object')\n        return;\n    try {\n        Object.defineProperty(Object.prototype, '__magic__', {\n            get: function () {\n                return this;\n            },\n            configurable: true,\n        });\n        __magic__.globalThis = __magic__;\n        delete Object.prototype.__magic__;\n    }\n    catch (e) {\n        if (typeof self !== 'undefined') {\n            self.globalThis = self;\n        }\n    }\n}\n\nvar __awaiter$2 = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\npolyfillGlobalThis(); // Make \"globalThis\" available\nconst DEFAULT_OPTIONS = {\n    url: GOTRUE_URL,\n    autoRefreshToken: true,\n    persistSession: true,\n    localStorage: globalThis.localStorage,\n    detectSessionInUrl: true,\n    headers: DEFAULT_HEADERS$1,\n};\nclass GoTrueClient {\n    /**\n     * Create a new client for use in the browser.\n     * @param options.url The URL of the GoTrue server.\n     * @param options.headers Any additional headers to send to the GoTrue server.\n     * @param options.detectSessionInUrl Set to \"true\" if you want to automatically detects OAuth grants in the URL and signs in the user.\n     * @param options.autoRefreshToken Set to \"true\" if you want to automatically refresh the token before expiring.\n     * @param options.persistSession Set to \"true\" if you want to automatically save the user session into local storage.\n     * @param options.localStorage\n     */\n    constructor(options) {\n        this.stateChangeEmitters = new Map();\n        const settings = Object.assign(Object.assign({}, DEFAULT_OPTIONS), options);\n        this.currentUser = null;\n        this.currentSession = null;\n        this.autoRefreshToken = settings.autoRefreshToken;\n        this.persistSession = settings.persistSession;\n        this.localStorage = new LocalStorage(settings.localStorage);\n        this.api = new GoTrueApi({\n            url: settings.url,\n            headers: settings.headers,\n            cookieOptions: settings.cookieOptions,\n        });\n        this._recoverSession();\n        this._recoverAndRefresh();\n        // Handle the OAuth redirect\n        try {\n            if (settings.detectSessionInUrl && isBrowser() && !!getParameterByName('access_token')) {\n                this.getSessionFromUrl({ storeSession: true });\n            }\n        }\n        catch (error) {\n            console.log('Error getting session from URL.');\n        }\n    }\n    /**\n     * Creates a new user.\n     * @type UserCredentials\n     * @param email The user's email address.\n     * @param password The user's password.\n     * @param redirectTo A URL or mobile address to send the user to after they are confirmed.\n     */\n    signUp({ email, password }, options = {}) {\n        return __awaiter$2(this, void 0, void 0, function* () {\n            try {\n                this._removeSession();\n                const { data, error } = yield this.api.signUpWithEmail(email, password, {\n                    redirectTo: options.redirectTo,\n                });\n                if (error) {\n                    throw error;\n                }\n                if (!data) {\n                    throw 'An error occurred on sign up.';\n                }\n                let session = null;\n                let user = null;\n                if (data.access_token) {\n                    session = data;\n                    user = session.user;\n                    this._saveSession(session);\n                    this._notifyAllSubscribers('SIGNED_IN');\n                }\n                if (data.id) {\n                    user = data;\n                }\n                return { data, user, session, error: null };\n            }\n            catch (error) {\n                return { data: null, user: null, session: null, error };\n            }\n        });\n    }\n    /**\n     * Log in an existing user, or login via a third-party provider.\n     * @type UserCredentials\n     * @param email The user's email address.\n     * @param password The user's password.\n     * @param refreshToken A valid refresh token that was returned on login.\n     * @param provider One of the providers supported by GoTrue.\n     * @param redirectTo A URL or mobile address to send the user to after they are confirmed.\n     * @param scopes A space-separated list of scopes granted to the OAuth application.\n     */\n    signIn({ email, password, refreshToken, provider }, options = {}) {\n        return __awaiter$2(this, void 0, void 0, function* () {\n            try {\n                this._removeSession();\n                if (email && !password) {\n                    const { error } = yield this.api.sendMagicLinkEmail(email, {\n                        redirectTo: options.redirectTo,\n                    });\n                    return { data: null, user: null, session: null, error };\n                }\n                if (email && password) {\n                    return this._handleEmailSignIn(email, password, {\n                        redirectTo: options.redirectTo,\n                    });\n                }\n                if (refreshToken) {\n                    // currentSession and currentUser will be updated to latest on _callRefreshToken using the passed refreshToken\n                    const { error } = yield this._callRefreshToken(refreshToken);\n                    if (error)\n                        throw error;\n                    return {\n                        data: this.currentSession,\n                        user: this.currentUser,\n                        session: this.currentSession,\n                        error: null,\n                    };\n                }\n                if (provider) {\n                    return this._handleProviderSignIn(provider, {\n                        redirectTo: options.redirectTo,\n                        scopes: options.scopes,\n                    });\n                }\n                throw new Error(`You must provide either an email or a third-party provider.`);\n            }\n            catch (error) {\n                return { data: null, user: null, session: null, error };\n            }\n        });\n    }\n    /**\n     * Inside a browser context, `user()` will return the user data, if there is a logged in user.\n     *\n     * For server-side management, you can get a user through `auth.api.getUserByCookie()`\n     */\n    user() {\n        return this.currentUser;\n    }\n    /**\n     * Returns the session data, if there is an active session.\n     */\n    session() {\n        return this.currentSession;\n    }\n    /**\n     * Force refreshes the session including the user data in case it was updated in a different session.\n     */\n    refreshSession() {\n        var _a;\n        return __awaiter$2(this, void 0, void 0, function* () {\n            try {\n                if (!((_a = this.currentSession) === null || _a === void 0 ? void 0 : _a.access_token))\n                    throw new Error('Not logged in.');\n                // currentSession and currentUser will be updated to latest on _callRefreshToken\n                const { error } = yield this._callRefreshToken();\n                if (error)\n                    throw error;\n                return { data: this.currentSession, user: this.currentUser, error: null };\n            }\n            catch (error) {\n                return { data: null, user: null, error };\n            }\n        });\n    }\n    /**\n     * Updates user data, if there is a logged in user.\n     */\n    update(attributes) {\n        var _a;\n        return __awaiter$2(this, void 0, void 0, function* () {\n            try {\n                if (!((_a = this.currentSession) === null || _a === void 0 ? void 0 : _a.access_token))\n                    throw new Error('Not logged in.');\n                const { user, error } = yield this.api.updateUser(this.currentSession.access_token, attributes);\n                if (error)\n                    throw error;\n                if (!user)\n                    throw Error('Invalid user data.');\n                const session = Object.assign(Object.assign({}, this.currentSession), { user });\n                this._saveSession(session);\n                this._notifyAllSubscribers('USER_UPDATED');\n                return { data: user, user, error: null };\n            }\n            catch (error) {\n                return { data: null, user: null, error };\n            }\n        });\n    }\n    /**\n     * Sets the session data from refresh_token and returns current Session and Error\n     * @param refresh_token a JWT token\n     */\n    setSession(refresh_token) {\n        return __awaiter$2(this, void 0, void 0, function* () {\n            try {\n                if (!refresh_token) {\n                    throw new Error('No current session.');\n                }\n                const { data, error } = yield this.api.refreshAccessToken(refresh_token);\n                if (error) {\n                    return { session: null, error: error };\n                }\n                if (!data) {\n                    return {\n                        session: null,\n                        error: { name: 'Invalid refresh_token', message: 'JWT token provided is Invalid' },\n                    };\n                }\n                this._saveSession(data);\n                this._notifyAllSubscribers('SIGNED_IN');\n                return { session: data, error: null };\n            }\n            catch (error) {\n                return { error, session: null };\n            }\n        });\n    }\n    /**\n     * Overrides the JWT on the current client. The JWT will then be sent in all subsequent network requests.\n     * @param access_token a jwt access token\n     */\n    setAuth(access_token) {\n        this.currentSession = Object.assign(Object.assign({}, this.currentSession), { access_token, token_type: 'bearer', user: null });\n        return this.currentSession;\n    }\n    /**\n     * Gets the session data from a URL string\n     * @param options.storeSession Optionally store the session in the browser\n     */\n    getSessionFromUrl(options) {\n        return __awaiter$2(this, void 0, void 0, function* () {\n            try {\n                if (!isBrowser())\n                    throw new Error('No browser detected.');\n                const error_description = getParameterByName('error_description');\n                if (error_description)\n                    throw new Error(error_description);\n                const provider_token = getParameterByName('provider_token');\n                const access_token = getParameterByName('access_token');\n                if (!access_token)\n                    throw new Error('No access_token detected.');\n                const expires_in = getParameterByName('expires_in');\n                if (!expires_in)\n                    throw new Error('No expires_in detected.');\n                const refresh_token = getParameterByName('refresh_token');\n                if (!refresh_token)\n                    throw new Error('No refresh_token detected.');\n                const token_type = getParameterByName('token_type');\n                if (!token_type)\n                    throw new Error('No token_type detected.');\n                const timeNow = Math.round(Date.now() / 1000);\n                const expires_at = timeNow + parseInt(expires_in);\n                const { user, error } = yield this.api.getUser(access_token);\n                if (error)\n                    throw error;\n                const session = {\n                    provider_token,\n                    access_token,\n                    expires_in: parseInt(expires_in),\n                    expires_at,\n                    refresh_token,\n                    token_type,\n                    user: user,\n                };\n                if (options === null || options === void 0 ? void 0 : options.storeSession) {\n                    this._saveSession(session);\n                    this._notifyAllSubscribers('SIGNED_IN');\n                    if (getParameterByName('type') === 'recovery') {\n                        this._notifyAllSubscribers('PASSWORD_RECOVERY');\n                    }\n                }\n                // Remove tokens from URL\n                window.location.hash = '';\n                return { data: session, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    /**\n     * Inside a browser context, `signOut()` will remove extract the logged in user from the browser session\n     * and log them out - removing all items from localstorage and then trigger a \"SIGNED_OUT\" event.\n     *\n     * For server-side management, you can disable sessions by passing a JWT through to `auth.api.signOut(JWT: string)`\n     */\n    signOut() {\n        var _a;\n        return __awaiter$2(this, void 0, void 0, function* () {\n            const accessToken = (_a = this.currentSession) === null || _a === void 0 ? void 0 : _a.access_token;\n            this._removeSession();\n            this._notifyAllSubscribers('SIGNED_OUT');\n            if (accessToken) {\n                const { error } = yield this.api.signOut(accessToken);\n                if (error)\n                    return { error };\n            }\n            return { error: null };\n        });\n    }\n    /**\n     * Receive a notification every time an auth event happens.\n     * @returns {Subscription} A subscription object which can be used to unsubscribe itself.\n     */\n    onAuthStateChange(callback) {\n        try {\n            const id = uuid();\n            const self = this;\n            const subscription = {\n                id,\n                callback,\n                unsubscribe: () => {\n                    self.stateChangeEmitters.delete(id);\n                },\n            };\n            this.stateChangeEmitters.set(id, subscription);\n            return { data: subscription, error: null };\n        }\n        catch (error) {\n            return { data: null, error };\n        }\n    }\n    _handleEmailSignIn(email, password, options = {}) {\n        var _a;\n        return __awaiter$2(this, void 0, void 0, function* () {\n            try {\n                const { data, error } = yield this.api.signInWithEmail(email, password, {\n                    redirectTo: options.redirectTo,\n                });\n                if (error || !data)\n                    return { data: null, user: null, session: null, error };\n                if ((_a = data === null || data === void 0 ? void 0 : data.user) === null || _a === void 0 ? void 0 : _a.confirmed_at) {\n                    this._saveSession(data);\n                    this._notifyAllSubscribers('SIGNED_IN');\n                }\n                return { data, user: data.user, session: data, error: null };\n            }\n            catch (error) {\n                return { data: null, user: null, session: null, error };\n            }\n        });\n    }\n    _handleProviderSignIn(provider, options = {}) {\n        const url = this.api.getUrlForProvider(provider, {\n            redirectTo: options.redirectTo,\n            scopes: options.scopes,\n        });\n        try {\n            // try to open on the browser\n            if (isBrowser()) {\n                window.location.href = url;\n            }\n            return { provider, url, data: null, session: null, user: null, error: null };\n        }\n        catch (error) {\n            // fallback to returning the URL\n            if (!!url)\n                return { provider, url, data: null, session: null, user: null, error: null };\n            return { data: null, user: null, session: null, error };\n        }\n    }\n    /**\n     * Attempts to get the session from LocalStorage\n     * Note: this should never be async (even for React Native), as we need it to return immediately in the constructor.\n     */\n    _recoverSession() {\n        var _a;\n        try {\n            const json = isBrowser() && ((_a = this.localStorage) === null || _a === void 0 ? void 0 : _a.getItem(STORAGE_KEY));\n            if (!json || typeof json !== 'string') {\n                return null;\n            }\n            const data = JSON.parse(json);\n            const { currentSession, expiresAt } = data;\n            const timeNow = Math.round(Date.now() / 1000);\n            if (expiresAt >= timeNow && (currentSession === null || currentSession === void 0 ? void 0 : currentSession.user)) {\n                this._saveSession(currentSession);\n                this._notifyAllSubscribers('SIGNED_IN');\n            }\n        }\n        catch (error) {\n            console.log('error', error);\n        }\n    }\n    /**\n     * Recovers the session from LocalStorage and refreshes\n     * Note: this method is async to accommodate for AsyncStorage e.g. in React native.\n     */\n    _recoverAndRefresh() {\n        return __awaiter$2(this, void 0, void 0, function* () {\n            try {\n                const json = isBrowser() && (yield this.localStorage.getItem(STORAGE_KEY));\n                if (!json) {\n                    return null;\n                }\n                const data = JSON.parse(json);\n                const { currentSession, expiresAt } = data;\n                const timeNow = Math.round(Date.now() / 1000);\n                if (expiresAt < timeNow) {\n                    if (this.autoRefreshToken && currentSession.refresh_token) {\n                        const { error } = yield this._callRefreshToken(currentSession.refresh_token);\n                        if (error) {\n                            console.log(error.message);\n                            yield this._removeSession();\n                        }\n                    }\n                    else {\n                        this._removeSession();\n                    }\n                }\n                else if (!currentSession || !currentSession.user) {\n                    console.log('Current session is missing data.');\n                    this._removeSession();\n                }\n                else {\n                    // should be handled on _recoverSession method already\n                    // But we still need the code here to accommodate for AsyncStorage e.g. in React native\n                    this._saveSession(currentSession);\n                    this._notifyAllSubscribers('SIGNED_IN');\n                }\n            }\n            catch (err) {\n                console.error(err);\n                return null;\n            }\n        });\n    }\n    _callRefreshToken(refresh_token) {\n        var _a;\n        if (refresh_token === void 0) { refresh_token = (_a = this.currentSession) === null || _a === void 0 ? void 0 : _a.refresh_token; }\n        return __awaiter$2(this, void 0, void 0, function* () {\n            try {\n                if (!refresh_token) {\n                    throw new Error('No current session.');\n                }\n                const { data, error } = yield this.api.refreshAccessToken(refresh_token);\n                if (error)\n                    throw error;\n                if (!data)\n                    throw Error('Invalid session data.');\n                this._saveSession(data);\n                this._notifyAllSubscribers('SIGNED_IN');\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    _notifyAllSubscribers(event) {\n        this.stateChangeEmitters.forEach((x) => x.callback(event, this.currentSession));\n    }\n    /**\n     * set currentSession and currentUser\n     * process to _startAutoRefreshToken if possible\n     */\n    _saveSession(session) {\n        this.currentSession = session;\n        this.currentUser = session.user;\n        const expiresAt = session.expires_at;\n        const timeNow = Math.round(Date.now() / 1000);\n        if (expiresAt)\n            this._startAutoRefreshToken((expiresAt - timeNow - 60) * 1000);\n        // Do we need any extra check before persist session\n        // access_token or user ?\n        if (this.persistSession && session.expires_at) {\n            this._persistSession(this.currentSession);\n        }\n    }\n    _persistSession(currentSession) {\n        const data = { currentSession, expiresAt: currentSession.expires_at };\n        isBrowser() && this.localStorage.setItem(STORAGE_KEY, JSON.stringify(data));\n    }\n    _removeSession() {\n        return __awaiter$2(this, void 0, void 0, function* () {\n            this.currentSession = null;\n            this.currentUser = null;\n            if (this.refreshTokenTimer)\n                clearTimeout(this.refreshTokenTimer);\n            isBrowser() && (yield this.localStorage.removeItem(STORAGE_KEY));\n        });\n    }\n    /**\n     * Clear and re-create refresh token timer\n     * @param value time intervals in milliseconds\n     */\n    _startAutoRefreshToken(value) {\n        if (this.refreshTokenTimer)\n            clearTimeout(this.refreshTokenTimer);\n        if (!value || !this.autoRefreshToken)\n            return;\n        this.refreshTokenTimer = setTimeout(() => this._callRefreshToken(), value);\n    }\n}\n\nclass SupabaseAuthClient extends GoTrueClient {\n    constructor(options) {\n        super(options);\n    }\n}\n\nvar __awaiter$3 = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nclass PostgrestBuilder {\n    constructor(builder) {\n        Object.assign(this, builder);\n    }\n    then(onfulfilled, onrejected) {\n        // https://postgrest.org/en/stable/api.html#switching-schemas\n        if (typeof this.schema === 'undefined') ;\n        else if (['GET', 'HEAD'].includes(this.method)) {\n            this.headers['Accept-Profile'] = this.schema;\n        }\n        else {\n            this.headers['Content-Profile'] = this.schema;\n        }\n        if (this.method !== 'GET' && this.method !== 'HEAD') {\n            this.headers['Content-Type'] = 'application/json';\n        }\n        return fetch$1(this.url.toString(), {\n            method: this.method,\n            headers: this.headers,\n            body: JSON.stringify(this.body),\n        })\n            .then((res) => __awaiter$3(this, void 0, void 0, function* () {\n            var _a, _b, _c;\n            let error = null;\n            let data = null;\n            let count = null;\n            if (res.ok) {\n                const isReturnMinimal = (_a = this.headers['Prefer']) === null || _a === void 0 ? void 0 : _a.split(',').includes('return=minimal');\n                if (this.method !== 'HEAD' && !isReturnMinimal) {\n                    const text = yield res.text();\n                    if (text && text !== '' && this.headers['Accept'] !== 'text/csv')\n                        data = JSON.parse(text);\n                }\n                const countHeader = (_b = this.headers['Prefer']) === null || _b === void 0 ? void 0 : _b.match(/count=(exact|planned|estimated)/);\n                const contentRange = (_c = res.headers.get('content-range')) === null || _c === void 0 ? void 0 : _c.split('/');\n                if (countHeader && contentRange && contentRange.length > 1) {\n                    count = parseInt(contentRange[1]);\n                }\n            }\n            else {\n                error = yield res.json();\n            }\n            const postgrestResponse = {\n                error,\n                data,\n                count,\n                status: res.status,\n                statusText: res.statusText,\n                body: data,\n            };\n            return postgrestResponse;\n        }))\n            .then(onfulfilled, onrejected);\n    }\n}\n\n/**\n * Post-filters (transforms)\n */\nclass PostgrestTransformBuilder extends PostgrestBuilder {\n    /**\n     * Performs vertical filtering with SELECT.\n     *\n     * @param columns  The columns to retrieve, separated by commas.\n     */\n    select(columns = '*') {\n        // Remove whitespaces except when quoted\n        let quoted = false;\n        const cleanedColumns = columns\n            .split('')\n            .map((c) => {\n            if (/\\s/.test(c) && !quoted) {\n                return '';\n            }\n            if (c === '\"') {\n                quoted = !quoted;\n            }\n            return c;\n        })\n            .join('');\n        this.url.searchParams.set('select', cleanedColumns);\n        return this;\n    }\n    /**\n     * Orders the result with the specified `column`.\n     *\n     * @param column  The column to order on.\n     * @param ascending  If `true`, the result will be in ascending order.\n     * @param nullsFirst  If `true`, `null`s appear first.\n     * @param foreignTable  The foreign table to use (if `column` is a foreign column).\n     */\n    order(column, { ascending = true, nullsFirst = false, foreignTable, } = {}) {\n        const key = typeof foreignTable === 'undefined' ? 'order' : `${foreignTable}.order`;\n        const existingOrder = this.url.searchParams.get(key);\n        this.url.searchParams.set(key, `${existingOrder ? `${existingOrder},` : ''}${column}.${ascending ? 'asc' : 'desc'}.${nullsFirst ? 'nullsfirst' : 'nullslast'}`);\n        return this;\n    }\n    /**\n     * Limits the result with the specified `count`.\n     *\n     * @param count  The maximum no. of rows to limit to.\n     * @param foreignTable  The foreign table to use (for foreign columns).\n     */\n    limit(count, { foreignTable } = {}) {\n        const key = typeof foreignTable === 'undefined' ? 'limit' : `${foreignTable}.limit`;\n        this.url.searchParams.set(key, `${count}`);\n        return this;\n    }\n    /**\n     * Limits the result to rows within the specified range, inclusive.\n     *\n     * @param from  The starting index from which to limit the result, inclusive.\n     * @param to  The last index to which to limit the result, inclusive.\n     * @param foreignTable  The foreign table to use (for foreign columns).\n     */\n    range(from, to, { foreignTable } = {}) {\n        const keyOffset = typeof foreignTable === 'undefined' ? 'offset' : `${foreignTable}.offset`;\n        const keyLimit = typeof foreignTable === 'undefined' ? 'limit' : `${foreignTable}.limit`;\n        this.url.searchParams.set(keyOffset, `${from}`);\n        // Range is inclusive, so add 1\n        this.url.searchParams.set(keyLimit, `${to - from + 1}`);\n        return this;\n    }\n    /**\n     * Retrieves only one row from the result. Result must be one row (e.g. using\n     * `limit`), otherwise this will result in an error.\n     */\n    single() {\n        this.headers['Accept'] = 'application/vnd.pgrst.object+json';\n        return this;\n    }\n    /**\n     * Retrieves at most one row from the result. Result must be at most one row\n     * (e.g. using `eq` on a UNIQUE column), otherwise this will result in an\n     * error.\n     */\n    maybeSingle() {\n        this.headers['Accept'] = 'application/vnd.pgrst.object+json';\n        const _this = new PostgrestTransformBuilder(this);\n        _this.then = ((onfulfilled, onrejected) => this.then((res) => {\n            var _a;\n            if ((_a = res.error) === null || _a === void 0 ? void 0 : _a.details.includes('Results contain 0 rows')) {\n                return onfulfilled({\n                    error: null,\n                    data: null,\n                    count: res.count,\n                    status: 200,\n                    statusText: 'OK',\n                    body: null,\n                });\n            }\n            return onfulfilled(res);\n        }, onrejected));\n        return _this;\n    }\n    /**\n     * Set the response type to CSV.\n     */\n    csv() {\n        this.headers['Accept'] = 'text/csv';\n        return this;\n    }\n}\n\nclass PostgrestFilterBuilder extends PostgrestTransformBuilder {\n    constructor() {\n        super(...arguments);\n        /** @deprecated Use `contains()` instead. */\n        this.cs = this.contains;\n        /** @deprecated Use `containedBy()` instead. */\n        this.cd = this.containedBy;\n        /** @deprecated Use `rangeLt()` instead. */\n        this.sl = this.rangeLt;\n        /** @deprecated Use `rangeGt()` instead. */\n        this.sr = this.rangeGt;\n        /** @deprecated Use `rangeGte()` instead. */\n        this.nxl = this.rangeGte;\n        /** @deprecated Use `rangeLte()` instead. */\n        this.nxr = this.rangeLte;\n        /** @deprecated Use `rangeAdjacent()` instead. */\n        this.adj = this.rangeAdjacent;\n        /** @deprecated Use `overlaps()` instead. */\n        this.ov = this.overlaps;\n    }\n    /**\n     * Finds all rows which doesn't satisfy the filter.\n     *\n     * @param column  The column to filter on.\n     * @param operator  The operator to filter with.\n     * @param value  The value to filter with.\n     */\n    not(column, operator, value) {\n        this.url.searchParams.append(`${column}`, `not.${operator}.${value}`);\n        return this;\n    }\n    /**\n     * Finds all rows satisfying at least one of the filters.\n     *\n     * @param filters  The filters to use, separated by commas.\n     * @param foreignTable  The foreign table to use (if `column` is a foreign column).\n     */\n    or(filters, { foreignTable } = {}) {\n        const key = typeof foreignTable === 'undefined' ? 'or' : `${foreignTable}.or`;\n        this.url.searchParams.append(key, `(${filters})`);\n        return this;\n    }\n    /**\n     * Finds all rows whose value on the stated `column` exactly matches the\n     * specified `value`.\n     *\n     * @param column  The column to filter on.\n     * @param value  The value to filter with.\n     */\n    eq(column, value) {\n        this.url.searchParams.append(`${column}`, `eq.${value}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose value on the stated `column` doesn't match the\n     * specified `value`.\n     *\n     * @param column  The column to filter on.\n     * @param value  The value to filter with.\n     */\n    neq(column, value) {\n        this.url.searchParams.append(`${column}`, `neq.${value}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose value on the stated `column` is greater than the\n     * specified `value`.\n     *\n     * @param column  The column to filter on.\n     * @param value  The value to filter with.\n     */\n    gt(column, value) {\n        this.url.searchParams.append(`${column}`, `gt.${value}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose value on the stated `column` is greater than or\n     * equal to the specified `value`.\n     *\n     * @param column  The column to filter on.\n     * @param value  The value to filter with.\n     */\n    gte(column, value) {\n        this.url.searchParams.append(`${column}`, `gte.${value}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose value on the stated `column` is less than the\n     * specified `value`.\n     *\n     * @param column  The column to filter on.\n     * @param value  The value to filter with.\n     */\n    lt(column, value) {\n        this.url.searchParams.append(`${column}`, `lt.${value}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose value on the stated `column` is less than or equal\n     * to the specified `value`.\n     *\n     * @param column  The column to filter on.\n     * @param value  The value to filter with.\n     */\n    lte(column, value) {\n        this.url.searchParams.append(`${column}`, `lte.${value}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose value in the stated `column` matches the supplied\n     * `pattern` (case sensitive).\n     *\n     * @param column  The column to filter on.\n     * @param pattern  The pattern to filter with.\n     */\n    like(column, pattern) {\n        this.url.searchParams.append(`${column}`, `like.${pattern}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose value in the stated `column` matches the supplied\n     * `pattern` (case insensitive).\n     *\n     * @param column  The column to filter on.\n     * @param pattern  The pattern to filter with.\n     */\n    ilike(column, pattern) {\n        this.url.searchParams.append(`${column}`, `ilike.${pattern}`);\n        return this;\n    }\n    /**\n     * A check for exact equality (null, true, false), finds all rows whose\n     * value on the stated `column` exactly match the specified `value`.\n     *\n     * @param column  The column to filter on.\n     * @param value  The value to filter with.\n     */\n    is(column, value) {\n        this.url.searchParams.append(`${column}`, `is.${value}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose value on the stated `column` is found on the\n     * specified `values`.\n     *\n     * @param column  The column to filter on.\n     * @param values  The values to filter with.\n     */\n    in(column, values) {\n        const cleanedValues = values\n            .map((s) => {\n            // handle postgrest reserved characters\n            // https://postgrest.org/en/v7.0.0/api.html#reserved-characters\n            if (typeof s === 'string' && new RegExp('[,()]').test(s))\n                return `\"${s}\"`;\n            else\n                return `${s}`;\n        })\n            .join(',');\n        this.url.searchParams.append(`${column}`, `in.(${cleanedValues})`);\n        return this;\n    }\n    /**\n     * Finds all rows whose json, array, or range value on the stated `column`\n     * contains the values specified in `value`.\n     *\n     * @param column  The column to filter on.\n     * @param value  The value to filter with.\n     */\n    contains(column, value) {\n        if (typeof value === 'string') {\n            // range types can be inclusive '[', ']' or exclusive '(', ')' so just\n            // keep it simple and accept a string\n            this.url.searchParams.append(`${column}`, `cs.${value}`);\n        }\n        else if (Array.isArray(value)) {\n            // array\n            this.url.searchParams.append(`${column}`, `cs.{${value.join(',')}}`);\n        }\n        else {\n            // json\n            this.url.searchParams.append(`${column}`, `cs.${JSON.stringify(value)}`);\n        }\n        return this;\n    }\n    /**\n     * Finds all rows whose json, array, or range value on the stated `column` is\n     * contained by the specified `value`.\n     *\n     * @param column  The column to filter on.\n     * @param value  The value to filter with.\n     */\n    containedBy(column, value) {\n        if (typeof value === 'string') {\n            // range\n            this.url.searchParams.append(`${column}`, `cd.${value}`);\n        }\n        else if (Array.isArray(value)) {\n            // array\n            this.url.searchParams.append(`${column}`, `cd.{${value.join(',')}}`);\n        }\n        else {\n            // json\n            this.url.searchParams.append(`${column}`, `cd.${JSON.stringify(value)}`);\n        }\n        return this;\n    }\n    /**\n     * Finds all rows whose range value on the stated `column` is strictly to the\n     * left of the specified `range`.\n     *\n     * @param column  The column to filter on.\n     * @param range  The range to filter with.\n     */\n    rangeLt(column, range) {\n        this.url.searchParams.append(`${column}`, `sl.${range}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose range value on the stated `column` is strictly to\n     * the right of the specified `range`.\n     *\n     * @param column  The column to filter on.\n     * @param range  The range to filter with.\n     */\n    rangeGt(column, range) {\n        this.url.searchParams.append(`${column}`, `sr.${range}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose range value on the stated `column` does not extend\n     * to the left of the specified `range`.\n     *\n     * @param column  The column to filter on.\n     * @param range  The range to filter with.\n     */\n    rangeGte(column, range) {\n        this.url.searchParams.append(`${column}`, `nxl.${range}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose range value on the stated `column` does not extend\n     * to the right of the specified `range`.\n     *\n     * @param column  The column to filter on.\n     * @param range  The range to filter with.\n     */\n    rangeLte(column, range) {\n        this.url.searchParams.append(`${column}`, `nxr.${range}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose range value on the stated `column` is adjacent to\n     * the specified `range`.\n     *\n     * @param column  The column to filter on.\n     * @param range  The range to filter with.\n     */\n    rangeAdjacent(column, range) {\n        this.url.searchParams.append(`${column}`, `adj.${range}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose array or range value on the stated `column` overlaps\n     * (has a value in common) with the specified `value`.\n     *\n     * @param column  The column to filter on.\n     * @param value  The value to filter with.\n     */\n    overlaps(column, value) {\n        if (typeof value === 'string') {\n            // range\n            this.url.searchParams.append(`${column}`, `ov.${value}`);\n        }\n        else {\n            // array\n            this.url.searchParams.append(`${column}`, `ov.{${value.join(',')}}`);\n        }\n        return this;\n    }\n    /**\n     * Finds all rows whose text or tsvector value on the stated `column` matches\n     * the tsquery in `query`.\n     *\n     * @param column  The column to filter on.\n     * @param query  The Postgres tsquery string to filter with.\n     * @param config  The text search configuration to use.\n     * @param type  The type of tsquery conversion to use on `query`.\n     */\n    textSearch(column, query, { config, type = null, } = {}) {\n        let typePart = '';\n        if (type === 'plain') {\n            typePart = 'pl';\n        }\n        else if (type === 'phrase') {\n            typePart = 'ph';\n        }\n        else if (type === 'websearch') {\n            typePart = 'w';\n        }\n        const configPart = config === undefined ? '' : `(${config})`;\n        this.url.searchParams.append(`${column}`, `${typePart}fts${configPart}.${query}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose tsvector value on the stated `column` matches\n     * to_tsquery(`query`).\n     *\n     * @param column  The column to filter on.\n     * @param query  The Postgres tsquery string to filter with.\n     * @param config  The text search configuration to use.\n     *\n     * @deprecated Use `textSearch()` instead.\n     */\n    fts(column, query, { config } = {}) {\n        const configPart = typeof config === 'undefined' ? '' : `(${config})`;\n        this.url.searchParams.append(`${column}`, `fts${configPart}.${query}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose tsvector value on the stated `column` matches\n     * plainto_tsquery(`query`).\n     *\n     * @param column  The column to filter on.\n     * @param query  The Postgres tsquery string to filter with.\n     * @param config  The text search configuration to use.\n     *\n     * @deprecated Use `textSearch()` with `type: 'plain'` instead.\n     */\n    plfts(column, query, { config } = {}) {\n        const configPart = typeof config === 'undefined' ? '' : `(${config})`;\n        this.url.searchParams.append(`${column}`, `plfts${configPart}.${query}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose tsvector value on the stated `column` matches\n     * phraseto_tsquery(`query`).\n     *\n     * @param column  The column to filter on.\n     * @param query  The Postgres tsquery string to filter with.\n     * @param config  The text search configuration to use.\n     *\n     * @deprecated Use `textSearch()` with `type: 'phrase'` instead.\n     */\n    phfts(column, query, { config } = {}) {\n        const configPart = typeof config === 'undefined' ? '' : `(${config})`;\n        this.url.searchParams.append(`${column}`, `phfts${configPart}.${query}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose tsvector value on the stated `column` matches\n     * websearch_to_tsquery(`query`).\n     *\n     * @param column  The column to filter on.\n     * @param query  The Postgres tsquery string to filter with.\n     * @param config  The text search configuration to use.\n     *\n     * @deprecated Use `textSearch()` with `type: 'websearch'` instead.\n     */\n    wfts(column, query, { config } = {}) {\n        const configPart = typeof config === 'undefined' ? '' : `(${config})`;\n        this.url.searchParams.append(`${column}`, `wfts${configPart}.${query}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose `column` satisfies the filter.\n     *\n     * @param column  The column to filter on.\n     * @param operator  The operator to filter with.\n     * @param value  The value to filter with.\n     */\n    filter(column, operator, value) {\n        this.url.searchParams.append(`${column}`, `${operator}.${value}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose columns match the specified `query` object.\n     *\n     * @param query  The object to filter with, with column names as keys mapped\n     *               to their filter values.\n     */\n    match(query) {\n        Object.keys(query).forEach((key) => {\n            this.url.searchParams.append(`${key}`, `eq.${query[key]}`);\n        });\n        return this;\n    }\n}\n\nclass PostgrestQueryBuilder extends PostgrestBuilder {\n    constructor(url, { headers = {}, schema } = {}) {\n        super({});\n        this.url = new URL(url);\n        this.headers = Object.assign({}, headers);\n        this.schema = schema;\n    }\n    /**\n     * Performs vertical filtering with SELECT.\n     *\n     * @param columns  The columns to retrieve, separated by commas.\n     * @param head  When set to true, select will void data.\n     * @param count  Count algorithm to use to count rows in a table.\n     */\n    select(columns = '*', { head = false, count = null, } = {}) {\n        this.method = 'GET';\n        // Remove whitespaces except when quoted\n        let quoted = false;\n        const cleanedColumns = columns\n            .split('')\n            .map((c) => {\n            if (/\\s/.test(c) && !quoted) {\n                return '';\n            }\n            if (c === '\"') {\n                quoted = !quoted;\n            }\n            return c;\n        })\n            .join('');\n        this.url.searchParams.set('select', cleanedColumns);\n        if (count) {\n            this.headers['Prefer'] = `count=${count}`;\n        }\n        if (head) {\n            this.method = 'HEAD';\n        }\n        return new PostgrestFilterBuilder(this);\n    }\n    insert(values, { upsert = false, onConflict, returning = 'representation', count = null, } = {}) {\n        this.method = 'POST';\n        const prefersHeaders = [`return=${returning}`];\n        if (upsert)\n            prefersHeaders.push('resolution=merge-duplicates');\n        if (upsert && onConflict !== undefined)\n            this.url.searchParams.set('on_conflict', onConflict);\n        this.body = values;\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        if (Array.isArray(values)) {\n            const columns = values.reduce((acc, x) => acc.concat(Object.keys(x)), []);\n            if (columns.length > 0) {\n                const uniqueColumns = [...new Set(columns)];\n                this.url.searchParams.set('columns', uniqueColumns.join(','));\n            }\n        }\n        return new PostgrestFilterBuilder(this);\n    }\n    /**\n     * Performs an UPSERT into the table.\n     *\n     * @param values  The values to insert.\n     * @param onConflict  By specifying the `on_conflict` query parameter, you can make UPSERT work on a column(s) that has a UNIQUE constraint.\n     * @param returning  By default the new record is returned. Set this to 'minimal' if you don't need this value.\n     * @param count  Count algorithm to use to count rows in a table.\n     */\n    upsert(values, { onConflict, returning = 'representation', count = null, } = {}) {\n        this.method = 'POST';\n        const prefersHeaders = ['resolution=merge-duplicates', `return=${returning}`];\n        if (onConflict !== undefined)\n            this.url.searchParams.set('on_conflict', onConflict);\n        this.body = values;\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        return new PostgrestFilterBuilder(this);\n    }\n    /**\n     * Performs an UPDATE on the table.\n     *\n     * @param values  The values to update.\n     * @param returning  By default the updated record is returned. Set this to 'minimal' if you don't need this value.\n     * @param count  Count algorithm to use to count rows in a table.\n     */\n    update(values, { returning = 'representation', count = null, } = {}) {\n        this.method = 'PATCH';\n        const prefersHeaders = [`return=${returning}`];\n        this.body = values;\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        return new PostgrestFilterBuilder(this);\n    }\n    /**\n     * Performs a DELETE on the table.\n     *\n     * @param returning  If `true`, return the deleted row(s) in the response.\n     * @param count  Count algorithm to use to count rows in a table.\n     */\n    delete({ returning = 'representation', count = null, } = {}) {\n        this.method = 'DELETE';\n        const prefersHeaders = [`return=${returning}`];\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        return new PostgrestFilterBuilder(this);\n    }\n}\n\nclass PostgrestRpcBuilder extends PostgrestBuilder {\n    constructor(url, { headers = {}, schema } = {}) {\n        super({});\n        this.url = new URL(url);\n        this.headers = Object.assign({}, headers);\n        this.schema = schema;\n    }\n    /**\n     * Perform a stored procedure call.\n     */\n    rpc(params, { count = null, } = {}) {\n        this.method = 'POST';\n        this.body = params;\n        if (count) {\n            if (this.headers['Prefer'] !== undefined)\n                this.headers['Prefer'] += `,count=${count}`;\n            else\n                this.headers['Prefer'] = `count=${count}`;\n        }\n        return new PostgrestFilterBuilder(this);\n    }\n}\n\nclass PostgrestClient {\n    /**\n     * Creates a PostgREST client.\n     *\n     * @param url  URL of the PostgREST endpoint.\n     * @param headers  Custom headers.\n     * @param schema  Postgres schema to switch to.\n     */\n    constructor(url, { headers = {}, schema } = {}) {\n        this.url = url;\n        this.headers = headers;\n        this.schema = schema;\n    }\n    /**\n     * Authenticates the request with JWT.\n     *\n     * @param token  The JWT token to use.\n     */\n    auth(token) {\n        this.headers['Authorization'] = `Bearer ${token}`;\n        return this;\n    }\n    /**\n     * Perform a table operation.\n     *\n     * @param table  The table name to operate on.\n     */\n    from(table) {\n        const url = `${this.url}/${table}`;\n        return new PostgrestQueryBuilder(url, { headers: this.headers, schema: this.schema });\n    }\n    /**\n     * Perform a stored procedure call.\n     *\n     * @param fn  The function name to call.\n     * @param params  The parameters to pass to the function call.\n     * @param count  Count algorithm to use to count rows in a table.\n     */\n    rpc(fn, params, { count = null, } = {}) {\n        const url = `${this.url}/rpc/${fn}`;\n        return new PostgrestRpcBuilder(url, {\n            headers: this.headers,\n            schema: this.schema,\n        }).rpc(params, { count });\n    }\n}\n\n/**\n * Helpers to convert the change Payload into native JS types.\n */\n// Adapted from epgsql (src/epgsql_binary.erl), this module licensed under\n// 3-clause BSD found here: https://raw.githubusercontent.com/epgsql/epgsql/devel/LICENSE\nvar PostgresTypes;\n(function (PostgresTypes) {\n    PostgresTypes[\"abstime\"] = \"abstime\";\n    PostgresTypes[\"bool\"] = \"bool\";\n    PostgresTypes[\"date\"] = \"date\";\n    PostgresTypes[\"daterange\"] = \"daterange\";\n    PostgresTypes[\"float4\"] = \"float4\";\n    PostgresTypes[\"float8\"] = \"float8\";\n    PostgresTypes[\"int2\"] = \"int2\";\n    PostgresTypes[\"int4\"] = \"int4\";\n    PostgresTypes[\"int4range\"] = \"int4range\";\n    PostgresTypes[\"int8\"] = \"int8\";\n    PostgresTypes[\"int8range\"] = \"int8range\";\n    PostgresTypes[\"json\"] = \"json\";\n    PostgresTypes[\"jsonb\"] = \"jsonb\";\n    PostgresTypes[\"money\"] = \"money\";\n    PostgresTypes[\"numeric\"] = \"numeric\";\n    PostgresTypes[\"oid\"] = \"oid\";\n    PostgresTypes[\"reltime\"] = \"reltime\";\n    PostgresTypes[\"time\"] = \"time\";\n    PostgresTypes[\"timestamp\"] = \"timestamp\";\n    PostgresTypes[\"timestamptz\"] = \"timestamptz\";\n    PostgresTypes[\"timetz\"] = \"timetz\";\n    PostgresTypes[\"tsrange\"] = \"tsrange\";\n    PostgresTypes[\"tstzrange\"] = \"tstzrange\";\n})(PostgresTypes || (PostgresTypes = {}));\n/**\n * Takes an array of columns and an object of string values then converts each string value\n * to its mapped type.\n *\n * @param {{name: String, type: String}[]} columns\n * @param {Object} records\n * @param {Object} options The map of various options that can be applied to the mapper\n * @param {Array} options.skipTypes The array of types that should not be converted\n *\n * @example convertChangeData([{name: 'first_name', type: 'text'}, {name: 'age', type: 'int4'}], {first_name: 'Paul', age:'33'}, {})\n * //=>{ first_name: 'Paul', age: 33 }\n */\nconst convertChangeData = (columns, records, options = {}) => {\n    let result = {};\n    let skipTypes = typeof options.skipTypes !== 'undefined' ? options.skipTypes : [];\n    Object.entries(records).map(([key, value]) => {\n        result[key] = convertColumn(key, columns, records, skipTypes);\n    });\n    return result;\n};\n/**\n * Converts the value of an individual column.\n *\n * @param {String} columnName The column that you want to convert\n * @param {{name: String, type: String}[]} columns All of the columns\n * @param {Object} records The map of string values\n * @param {Array} skipTypes An array of types that should not be converted\n * @return {object} Useless information\n *\n * @example convertColumn('age', [{name: 'first_name', type: 'text'}, {name: 'age', type: 'int4'}], ['Paul', '33'], [])\n * //=> 33\n * @example convertColumn('age', [{name: 'first_name', type: 'text'}, {name: 'age', type: 'int4'}], ['Paul', '33'], ['int4'])\n * //=> \"33\"\n */\nconst convertColumn = (columnName, columns, records, skipTypes) => {\n    let column = columns.find((x) => x.name == columnName);\n    if (!column || skipTypes.includes(column.type)) {\n        return noop(records[columnName]);\n    }\n    else {\n        return convertCell(column.type, records[columnName]);\n    }\n};\n/**\n * If the value of the cell is `null`, returns null.\n * Otherwise converts the string value to the correct type.\n * @param {String} type A postgres column type\n * @param {String} stringValue The cell value\n *\n * @example convertCell('bool', 'true')\n * //=> true\n * @example convertCell('int8', '10')\n * //=> 10\n * @example convertCell('_int4', '{1,2,3,4}')\n * //=> [1,2,3,4]\n */\nconst convertCell = (type, stringValue) => {\n    try {\n        if (stringValue === null)\n            return null;\n        // if data type is an array\n        if (type.charAt(0) === '_') {\n            let arrayValue = type.slice(1, type.length);\n            return toArray(stringValue, arrayValue);\n        }\n        // If not null, convert to correct type.\n        switch (type) {\n            case PostgresTypes.abstime:\n                return noop(stringValue); // To allow users to cast it based on Timezone\n            case PostgresTypes.bool:\n                return toBoolean(stringValue);\n            case PostgresTypes.date:\n                return noop(stringValue); // To allow users to cast it based on Timezone\n            case PostgresTypes.daterange:\n                return toDateRange(stringValue);\n            case PostgresTypes.float4:\n                return toFloat(stringValue);\n            case PostgresTypes.float8:\n                return toFloat(stringValue);\n            case PostgresTypes.int2:\n                return toInt(stringValue);\n            case PostgresTypes.int4:\n                return toInt(stringValue);\n            case PostgresTypes.int4range:\n                return toIntRange(stringValue);\n            case PostgresTypes.int8:\n                return toInt(stringValue);\n            case PostgresTypes.int8range:\n                return toIntRange(stringValue);\n            case PostgresTypes.json:\n                return toJson(stringValue);\n            case PostgresTypes.jsonb:\n                return toJson(stringValue);\n            case PostgresTypes.money:\n                return toFloat(stringValue);\n            case PostgresTypes.numeric:\n                return toFloat(stringValue);\n            case PostgresTypes.oid:\n                return toInt(stringValue);\n            case PostgresTypes.reltime:\n                return noop(stringValue); // To allow users to cast it based on Timezone\n            case PostgresTypes.time:\n                return noop(stringValue); // To allow users to cast it based on Timezone\n            case PostgresTypes.timestamp:\n                return toTimestampString(stringValue); // Format to be consistent with PostgREST\n            case PostgresTypes.timestamptz:\n                return noop(stringValue); // To allow users to cast it based on Timezone\n            case PostgresTypes.timetz:\n                return noop(stringValue); // To allow users to cast it based on Timezone\n            case PostgresTypes.tsrange:\n                return toDateRange(stringValue);\n            case PostgresTypes.tstzrange:\n                return toDateRange(stringValue);\n            default:\n                // All the rest will be returned as strings\n                return noop(stringValue);\n        }\n    }\n    catch (error) {\n        console.log(`Could not convert cell of type ${type} and value ${stringValue}`);\n        console.log(`This is the error: ${error}`);\n        return stringValue;\n    }\n};\nconst noop = (stringValue) => {\n    return stringValue;\n};\nconst toBoolean = (stringValue) => {\n    switch (stringValue) {\n        case 't':\n            return true;\n        case 'f':\n            return false;\n        default:\n            return null;\n    }\n};\nconst toDateRange = (stringValue) => {\n    let arr = JSON.parse(stringValue);\n    return [new Date(arr[0]), new Date(arr[1])];\n};\nconst toFloat = (stringValue) => {\n    return parseFloat(stringValue);\n};\nconst toInt = (stringValue) => {\n    return parseInt(stringValue);\n};\nconst toIntRange = (stringValue) => {\n    let arr = JSON.parse(stringValue);\n    return [parseInt(arr[0]), parseInt(arr[1])];\n};\nconst toJson = (stringValue) => {\n    return JSON.parse(stringValue);\n};\n/**\n * Converts a Postgres Array into a native JS array\n *\n * @example toArray('{1,2,3,4}', 'int4')\n * //=> [1,2,3,4]\n * @example toArray('{}', 'int4')\n * //=> []\n */\nconst toArray = (stringValue, type) => {\n    // this takes off the '{' & '}'\n    let stringEnriched = stringValue.slice(1, stringValue.length - 1);\n    // converts the string into an array\n    // if string is empty (meaning the array was empty), an empty array will be immediately returned\n    let stringArray = stringEnriched.length > 0 ? stringEnriched.split(',') : [];\n    let array = stringArray.map((string) => {\n        return convertCell(type, string);\n    });\n    return array;\n};\n/**\n * Fixes timestamp to be ISO-8601. Swaps the space between the date and time for a 'T'\n * See https://github.com/supabase/supabase/issues/18\n *\n * @example toTimestampString('2019-09-10 00:00:00')\n * //=> '2019-09-10T00:00:00'\n */\nconst toTimestampString = (stringValue) => {\n    return stringValue.replace(' ', 'T');\n};\n\nconst VSN = '1.0.0';\nconst DEFAULT_TIMEOUT = 10000;\nconst WS_CLOSE_NORMAL = 1000;\nvar SOCKET_STATES;\n(function (SOCKET_STATES) {\n    SOCKET_STATES[SOCKET_STATES[\"connecting\"] = 0] = \"connecting\";\n    SOCKET_STATES[SOCKET_STATES[\"open\"] = 1] = \"open\";\n    SOCKET_STATES[SOCKET_STATES[\"closing\"] = 2] = \"closing\";\n    SOCKET_STATES[SOCKET_STATES[\"closed\"] = 3] = \"closed\";\n})(SOCKET_STATES || (SOCKET_STATES = {}));\nvar CHANNEL_STATES;\n(function (CHANNEL_STATES) {\n    CHANNEL_STATES[\"closed\"] = \"closed\";\n    CHANNEL_STATES[\"errored\"] = \"errored\";\n    CHANNEL_STATES[\"joined\"] = \"joined\";\n    CHANNEL_STATES[\"joining\"] = \"joining\";\n    CHANNEL_STATES[\"leaving\"] = \"leaving\";\n})(CHANNEL_STATES || (CHANNEL_STATES = {}));\nvar CHANNEL_EVENTS;\n(function (CHANNEL_EVENTS) {\n    CHANNEL_EVENTS[\"close\"] = \"phx_close\";\n    CHANNEL_EVENTS[\"error\"] = \"phx_error\";\n    CHANNEL_EVENTS[\"join\"] = \"phx_join\";\n    CHANNEL_EVENTS[\"reply\"] = \"phx_reply\";\n    CHANNEL_EVENTS[\"leave\"] = \"phx_leave\";\n})(CHANNEL_EVENTS || (CHANNEL_EVENTS = {}));\nvar TRANSPORTS;\n(function (TRANSPORTS) {\n    TRANSPORTS[\"websocket\"] = \"websocket\";\n})(TRANSPORTS || (TRANSPORTS = {}));\n\n/**\n * Creates a timer that accepts a `timerCalc` function to perform calculated timeout retries, such as exponential backoff.\n *\n * @example\n *    let reconnectTimer = new Timer(() => this.connect(), function(tries){\n *      return [1000, 5000, 10000][tries - 1] || 10000\n *    })\n *    reconnectTimer.scheduleTimeout() // fires after 1000\n *    reconnectTimer.scheduleTimeout() // fires after 5000\n *    reconnectTimer.reset()\n *    reconnectTimer.scheduleTimeout() // fires after 1000\n */\nclass Timer {\n    constructor(callback, timerCalc) {\n        this.callback = callback;\n        this.timerCalc = timerCalc;\n        this.timer = undefined;\n        this.tries = 0;\n        this.callback = callback;\n        this.timerCalc = timerCalc;\n    }\n    reset() {\n        this.tries = 0;\n        clearTimeout(this.timer);\n    }\n    // Cancels any previous scheduleTimeout and schedules callback\n    scheduleTimeout() {\n        clearTimeout(this.timer);\n        this.timer = setTimeout(() => {\n            this.tries = this.tries + 1;\n            this.callback();\n        }, this.timerCalc(this.tries + 1));\n    }\n}\n\nclass Push {\n    /**\n     * Initializes the Push\n     *\n     * @param channel The Channel\n     * @param event The event, for example `\"phx_join\"`\n     * @param payload The payload, for example `{user_id: 123}`\n     * @param timeout The push timeout in milliseconds\n     */\n    constructor(channel, event, payload = {}, timeout = DEFAULT_TIMEOUT) {\n        this.channel = channel;\n        this.event = event;\n        this.payload = payload;\n        this.timeout = timeout;\n        this.sent = false;\n        this.timeoutTimer = undefined;\n        this.ref = '';\n        this.receivedResp = null;\n        this.recHooks = [];\n        this.refEvent = null;\n    }\n    resend(timeout) {\n        this.timeout = timeout;\n        this._cancelRefEvent();\n        this.ref = '';\n        this.refEvent = null;\n        this.receivedResp = null;\n        this.sent = false;\n        this.send();\n    }\n    send() {\n        if (this._hasReceived('timeout')) {\n            return;\n        }\n        this.startTimeout();\n        this.sent = true;\n        this.channel.socket.push({\n            topic: this.channel.topic,\n            event: this.event,\n            payload: this.payload,\n            ref: this.ref,\n        });\n    }\n    receive(status, callback) {\n        var _a;\n        if (this._hasReceived(status)) {\n            callback((_a = this.receivedResp) === null || _a === void 0 ? void 0 : _a.response);\n        }\n        this.recHooks.push({ status, callback });\n        return this;\n    }\n    startTimeout() {\n        if (this.timeoutTimer) {\n            return;\n        }\n        this.ref = this.channel.socket.makeRef();\n        this.refEvent = this.channel.replyEventName(this.ref);\n        this.channel.on(this.refEvent, (payload) => {\n            this._cancelRefEvent();\n            this._cancelTimeout();\n            this.receivedResp = payload;\n            this._matchReceive(payload);\n        });\n        this.timeoutTimer = setTimeout(() => {\n            this.trigger('timeout', {});\n        }, this.timeout);\n    }\n    trigger(status, response) {\n        if (this.refEvent)\n            this.channel.trigger(this.refEvent, { status, response });\n    }\n    _cancelRefEvent() {\n        if (!this.refEvent) {\n            return;\n        }\n        this.channel.off(this.refEvent);\n    }\n    _cancelTimeout() {\n        clearTimeout(this.timeoutTimer);\n        this.timeoutTimer = undefined;\n    }\n    _matchReceive({ status, response, }) {\n        this.recHooks\n            .filter((h) => h.status === status)\n            .forEach((h) => h.callback(response));\n    }\n    _hasReceived(status) {\n        return this.receivedResp && this.receivedResp.status === status;\n    }\n}\n\nclass RealtimeSubscription {\n    constructor(topic, params = {}, socket) {\n        this.topic = topic;\n        this.params = params;\n        this.socket = socket;\n        this.bindings = [];\n        this.state = CHANNEL_STATES.closed;\n        this.joinedOnce = false;\n        this.pushBuffer = [];\n        this.timeout = this.socket.timeout;\n        this.joinPush = new Push(this, CHANNEL_EVENTS.join, this.params, this.timeout);\n        this.rejoinTimer = new Timer(() => this.rejoinUntilConnected(), this.socket.reconnectAfterMs);\n        this.joinPush.receive('ok', () => {\n            this.state = CHANNEL_STATES.joined;\n            this.rejoinTimer.reset();\n            this.pushBuffer.forEach((pushEvent) => pushEvent.send());\n            this.pushBuffer = [];\n        });\n        this.onClose(() => {\n            this.rejoinTimer.reset();\n            this.socket.log('channel', `close ${this.topic} ${this.joinRef()}`);\n            this.state = CHANNEL_STATES.closed;\n            this.socket.remove(this);\n        });\n        this.onError((reason) => {\n            if (this.isLeaving() || this.isClosed()) {\n                return;\n            }\n            this.socket.log('channel', `error ${this.topic}`, reason);\n            this.state = CHANNEL_STATES.errored;\n            this.rejoinTimer.scheduleTimeout();\n        });\n        this.joinPush.receive('timeout', () => {\n            if (!this.isJoining()) {\n                return;\n            }\n            this.socket.log('channel', `timeout ${this.topic}`, this.joinPush.timeout);\n            this.state = CHANNEL_STATES.errored;\n            this.rejoinTimer.scheduleTimeout();\n        });\n        this.on(CHANNEL_EVENTS.reply, (payload, ref) => {\n            this.trigger(this.replyEventName(ref), payload);\n        });\n    }\n    rejoinUntilConnected() {\n        this.rejoinTimer.scheduleTimeout();\n        if (this.socket.isConnected()) {\n            this.rejoin();\n        }\n    }\n    subscribe(timeout = this.timeout) {\n        if (this.joinedOnce) {\n            throw `tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance`;\n        }\n        else {\n            this.joinedOnce = true;\n            this.rejoin(timeout);\n            return this.joinPush;\n        }\n    }\n    onClose(callback) {\n        this.on(CHANNEL_EVENTS.close, callback);\n    }\n    onError(callback) {\n        this.on(CHANNEL_EVENTS.error, (reason) => callback(reason));\n    }\n    on(event, callback) {\n        this.bindings.push({ event, callback });\n    }\n    off(event) {\n        this.bindings = this.bindings.filter((bind) => bind.event !== event);\n    }\n    canPush() {\n        return this.socket.isConnected() && this.isJoined();\n    }\n    push(event, payload, timeout = this.timeout) {\n        if (!this.joinedOnce) {\n            throw `tried to push '${event}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;\n        }\n        let pushEvent = new Push(this, event, payload, timeout);\n        if (this.canPush()) {\n            pushEvent.send();\n        }\n        else {\n            pushEvent.startTimeout();\n            this.pushBuffer.push(pushEvent);\n        }\n        return pushEvent;\n    }\n    /**\n     * Leaves the channel\n     *\n     * Unsubscribes from server events, and instructs channel to terminate on server.\n     * Triggers onClose() hooks.\n     *\n     * To receive leave acknowledgements, use the a `receive` hook to bind to the server ack, ie:\n     * channel.unsubscribe().receive(\"ok\", () => alert(\"left!\") )\n     */\n    unsubscribe(timeout = this.timeout) {\n        this.state = CHANNEL_STATES.leaving;\n        let onClose = () => {\n            this.socket.log('channel', `leave ${this.topic}`);\n            this.trigger(CHANNEL_EVENTS.close, 'leave', this.joinRef());\n        };\n        let leavePush = new Push(this, CHANNEL_EVENTS.leave, {}, timeout);\n        leavePush.receive('ok', () => onClose()).receive('timeout', () => onClose());\n        leavePush.send();\n        if (!this.canPush()) {\n            leavePush.trigger('ok', {});\n        }\n        return leavePush;\n    }\n    /**\n     * Overridable message hook\n     *\n     * Receives all events for specialized message handling before dispatching to the channel callbacks.\n     * Must return the payload, modified or unmodified.\n     */\n    onMessage(event, payload, ref) {\n        return payload;\n    }\n    isMember(topic) {\n        return this.topic === topic;\n    }\n    joinRef() {\n        return this.joinPush.ref;\n    }\n    sendJoin(timeout) {\n        this.state = CHANNEL_STATES.joining;\n        this.joinPush.resend(timeout);\n    }\n    rejoin(timeout = this.timeout) {\n        if (this.isLeaving()) {\n            return;\n        }\n        this.sendJoin(timeout);\n    }\n    trigger(event, payload, ref) {\n        let { close, error, leave, join } = CHANNEL_EVENTS;\n        let events = [close, error, leave, join];\n        if (ref && events.indexOf(event) >= 0 && ref !== this.joinRef()) {\n            return;\n        }\n        let handledPayload = this.onMessage(event, payload, ref);\n        if (payload && !handledPayload) {\n            throw 'channel onMessage callbacks must return the payload, modified or unmodified';\n        }\n        this.bindings\n            .filter((bind) => {\n            // Bind all events if the user specifies a wildcard.\n            if (bind.event === '*') {\n                return event === (payload === null || payload === void 0 ? void 0 : payload.type);\n            }\n            else {\n                return bind.event === event;\n            }\n        })\n            .map((bind) => bind.callback(handledPayload, ref));\n    }\n    replyEventName(ref) {\n        return `chan_reply_${ref}`;\n    }\n    isClosed() {\n        return this.state === CHANNEL_STATES.closed;\n    }\n    isErrored() {\n        return this.state === CHANNEL_STATES.errored;\n    }\n    isJoined() {\n        return this.state === CHANNEL_STATES.joined;\n    }\n    isJoining() {\n        return this.state === CHANNEL_STATES.joining;\n    }\n    isLeaving() {\n        return this.state === CHANNEL_STATES.leaving;\n    }\n}\n\nvar naiveFallback = function () {\n\tif (typeof self === \"object\" && self) return self;\n\tif (typeof window === \"object\" && window) return window;\n\tthrow new Error(\"Unable to resolve global `this`\");\n};\n\nvar global$1 = (function () {\n\tif (this) return this;\n\n\t// Unexpected strict mode (may happen if e.g. bundled into ESM module)\n\n\t// Fallback to standard globalThis if available\n\tif (typeof globalThis === \"object\" && globalThis) return globalThis;\n\n\t// Thanks @mathiasbynens -> https://mathiasbynens.be/notes/globalthis\n\t// In all ES5+ engines global object inherits from Object.prototype\n\t// (if you approached one that doesn't please report)\n\ttry {\n\t\tObject.defineProperty(Object.prototype, \"__global__\", {\n\t\t\tget: function () { return this; },\n\t\t\tconfigurable: true\n\t\t});\n\t} catch (error) {\n\t\t// Unfortunate case of updates to Object.prototype being restricted\n\t\t// via preventExtensions, seal or freeze\n\t\treturn naiveFallback();\n\t}\n\ttry {\n\t\t// Safari case (window.__global__ works, but __global__ does not)\n\t\tif (!__global__) return naiveFallback();\n\t\treturn __global__;\n\t} finally {\n\t\tdelete Object.prototype.__global__;\n\t}\n})();\n\nconst name = \"websocket\";\nconst description = \"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.\";\nconst keywords = [\n  \"websocket\",\n  \"websockets\",\n  \"socket\",\n  \"networking\",\n  \"comet\",\n  \"push\",\n  \"RFC-6455\",\n  \"realtime\",\n  \"server\",\n  \"client\"\n];\nconst author = \"Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)\";\nconst contributors = [\n  \"Iaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)\"\n];\nconst version = \"1.0.34\";\nconst repository = {\n  type: \"git\",\n  url: \"https://github.com/theturtle32/WebSocket-Node.git\"\n};\nconst homepage = \"https://github.com/theturtle32/WebSocket-Node\";\nconst engines = {\n  node: \">=4.0.0\"\n};\nconst dependencies = {\n  bufferutil: \"^4.0.1\",\n  debug: \"^2.2.0\",\n  \"es5-ext\": \"^0.10.50\",\n  \"typedarray-to-buffer\": \"^3.1.5\",\n  \"utf-8-validate\": \"^5.0.2\",\n  yaeti: \"^0.0.6\"\n};\nconst devDependencies = {\n  \"buffer-equal\": \"^1.0.0\",\n  gulp: \"^4.0.2\",\n  \"gulp-jshint\": \"^2.0.4\",\n  \"jshint-stylish\": \"^2.2.1\",\n  jshint: \"^2.0.0\",\n  tape: \"^4.9.1\"\n};\nconst config = {\n  verbose: false\n};\nconst scripts = {\n  test: \"tape test/unit/*.js\",\n  gulp: \"gulp\"\n};\nconst main = \"index\";\nconst directories = {\n  lib: \"./lib\"\n};\nconst browser = \"lib/browser.js\";\nconst license = \"Apache-2.0\";\nconst _resolved = \"https://registry.npmjs.org/websocket/-/websocket-1.0.34.tgz\";\nconst _integrity = \"sha512-PRDso2sGwF6kM75QykIesBijKSVceR6jL2G8NGYyq2XrItNC2P5/qL5XeR056GhA+Ly7JMFvJb9I312mJfmqnQ==\";\nconst _from = \"websocket@1.0.34\";\nvar require$$0 = {\n  name: name,\n  description: description,\n  keywords: keywords,\n  author: author,\n  contributors: contributors,\n  version: version,\n  repository: repository,\n  homepage: homepage,\n  engines: engines,\n  dependencies: dependencies,\n  devDependencies: devDependencies,\n  config: config,\n  scripts: scripts,\n  main: main,\n  directories: directories,\n  browser: browser,\n  license: license,\n  _resolved: _resolved,\n  _integrity: _integrity,\n  _from: _from\n};\n\nvar version$1 = require$$0.version;\n\nvar _globalThis;\nif (typeof globalThis === 'object') {\n\t_globalThis = globalThis;\n} else {\n\ttry {\n\t\t_globalThis = global$1;\n\t} catch (error) {\n\t} finally {\n\t\tif (!_globalThis && typeof window !== 'undefined') { _globalThis = window; }\n\t\tif (!_globalThis) { throw new Error('Could not determine global this'); }\n\t}\n}\n\nvar NativeWebSocket = _globalThis.WebSocket || _globalThis.MozWebSocket;\n\n\n\n/**\n * Expose a W3C WebSocket class with just one or two arguments.\n */\nfunction W3CWebSocket(uri, protocols) {\n\tvar native_instance;\n\n\tif (protocols) {\n\t\tnative_instance = new NativeWebSocket(uri, protocols);\n\t}\n\telse {\n\t\tnative_instance = new NativeWebSocket(uri);\n\t}\n\n\t/**\n\t * 'native_instance' is an instance of nativeWebSocket (the browser's WebSocket\n\t * class). Since it is an Object it will be returned as it is when creating an\n\t * instance of W3CWebSocket via 'new W3CWebSocket()'.\n\t *\n\t * ECMAScript 5: http://bclary.com/2004/11/07/#a-13.2.2\n\t */\n\treturn native_instance;\n}\nif (NativeWebSocket) {\n\t['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'].forEach(function(prop) {\n\t\tObject.defineProperty(W3CWebSocket, prop, {\n\t\t\tget: function() { return NativeWebSocket[prop]; }\n\t\t});\n\t});\n}\n\n/**\n * Module exports.\n */\nvar browser$1 = {\n    'w3cwebsocket' : NativeWebSocket ? W3CWebSocket : null,\n    'version'      : version$1\n};\n\nvar __awaiter$4 = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nconst noop$1 = () => { };\nclass RealtimeClient {\n    /**\n     * Initializes the Socket\n     *\n     * @param endPoint The string WebSocket endpoint, ie, \"ws://example.com/socket\", \"wss://example.com\", \"/socket\" (inherited host & protocol)\n     * @param options.transport The Websocket Transport, for example WebSocket.\n     * @param options.timeout The default timeout in milliseconds to trigger push timeouts.\n     * @param options.params The optional params to pass when connecting.\n     * @param options.headers The optional headers to pass when connecting.\n     * @param options.heartbeatIntervalMs The millisec interval to send a heartbeat message.\n     * @param options.logger The optional function for specialized logging, ie: logger: (kind, msg, data) => { console.log(`${kind}: ${msg}`, data) }\n     * @param options.encode The function to encode outgoing messages. Defaults to JSON: (payload, callback) => callback(JSON.stringify(payload))\n     * @param options.decode The function to decode incoming messages. Defaults to JSON: (payload, callback) => callback(JSON.parse(payload))\n     * @param options.longpollerTimeout The maximum timeout of a long poll AJAX request. Defaults to 20s (double the server long poll timer).\n     * @param options.reconnectAfterMs he optional function that returns the millsec reconnect interval. Defaults to stepped backoff off.\n     */\n    constructor(endPoint, options) {\n        this.channels = [];\n        this.endPoint = '';\n        this.headers = {};\n        this.params = {};\n        this.timeout = DEFAULT_TIMEOUT;\n        this.transport = browser$1.w3cwebsocket;\n        this.heartbeatIntervalMs = 30000;\n        this.longpollerTimeout = 20000;\n        this.heartbeatTimer = undefined;\n        this.pendingHeartbeatRef = null;\n        this.ref = 0;\n        this.logger = noop$1;\n        this.conn = null;\n        this.sendBuffer = [];\n        this.stateChangeCallbacks = {\n            open: [],\n            close: [],\n            error: [],\n            message: [],\n        };\n        this.endPoint = `${endPoint}/${TRANSPORTS.websocket}`;\n        if (options === null || options === void 0 ? void 0 : options.params)\n            this.params = options.params;\n        if (options === null || options === void 0 ? void 0 : options.headers)\n            this.headers = options.headers;\n        if (options === null || options === void 0 ? void 0 : options.timeout)\n            this.timeout = options.timeout;\n        if (options === null || options === void 0 ? void 0 : options.logger)\n            this.logger = options.logger;\n        if (options === null || options === void 0 ? void 0 : options.transport)\n            this.transport = options.transport;\n        if (options === null || options === void 0 ? void 0 : options.heartbeatIntervalMs)\n            this.heartbeatIntervalMs = options.heartbeatIntervalMs;\n        if (options === null || options === void 0 ? void 0 : options.longpollerTimeout)\n            this.longpollerTimeout = options.longpollerTimeout;\n        this.reconnectAfterMs = (options === null || options === void 0 ? void 0 : options.reconnectAfterMs) ? options.reconnectAfterMs\n            : (tries) => {\n                return [1000, 2000, 5000, 10000][tries - 1] || 10000;\n            };\n        this.encode = (options === null || options === void 0 ? void 0 : options.encode) ? options.encode\n            : (payload, callback) => {\n                return callback(JSON.stringify(payload));\n            };\n        this.decode = (options === null || options === void 0 ? void 0 : options.decode) ? options.decode\n            : (payload, callback) => {\n                return callback(JSON.parse(payload));\n            };\n        this.reconnectTimer = new Timer(() => __awaiter$4(this, void 0, void 0, function* () {\n            yield this.disconnect();\n            this.connect();\n        }), this.reconnectAfterMs);\n    }\n    /**\n     * Connects the socket.\n     */\n    connect() {\n        if (this.conn) {\n            return;\n        }\n        this.conn = new this.transport(this.endPointURL(), [], null, this.headers);\n        if (this.conn) {\n            // this.conn.timeout = this.longpollerTimeout // TYPE ERROR\n            this.conn.onopen = () => this._onConnOpen();\n            this.conn.onerror = (error) => this._onConnError(error);\n            this.conn.onmessage = (event) => this.onConnMessage(event);\n            this.conn.onclose = (event) => this._onConnClose(event);\n        }\n    }\n    /**\n     * Disconnects the socket.\n     *\n     * @param code A numeric status code to send on disconnect.\n     * @param reason A custom reason for the disconnect.\n     */\n    disconnect(code, reason) {\n        return new Promise((resolve, _reject) => {\n            try {\n                if (this.conn) {\n                    this.conn.onclose = function () { }; // noop\n                    if (code) {\n                        this.conn.close(code, reason || '');\n                    }\n                    else {\n                        this.conn.close();\n                    }\n                    this.conn = null;\n                }\n                resolve({ error: null, data: true });\n            }\n            catch (error) {\n                resolve({ error, data: false });\n            }\n        });\n    }\n    /**\n     * Logs the message. Override `this.logger` for specialized logging.\n     */\n    log(kind, msg, data) {\n        this.logger(kind, msg, data);\n    }\n    /**\n     * Registers a callback for connection state change event.\n     * @param callback A function to be called when the event occurs.\n     *\n     * @example\n     *    socket.onOpen(() => console.log(\"Socket opened.\"))\n     */\n    onOpen(callback) {\n        this.stateChangeCallbacks.open.push(callback);\n    }\n    /**\n     * Registers a callbacks for connection state change events.\n     * @param callback A function to be called when the event occurs.\n     *\n     * @example\n     *    socket.onOpen(() => console.log(\"Socket closed.\"))\n     */\n    onClose(callback) {\n        this.stateChangeCallbacks.close.push(callback);\n    }\n    /**\n     * Registers a callback for connection state change events.\n     * @param callback A function to be called when the event occurs.\n     *\n     * @example\n     *    socket.onOpen((error) => console.log(\"An error occurred\"))\n     */\n    onError(callback) {\n        this.stateChangeCallbacks.error.push(callback);\n    }\n    /**\n     * Calls a function any time a message is received.\n     * @param callback A function to be called when the event occurs.\n     *\n     * @example\n     *    socket.onMessage((message) => console.log(message))\n     */\n    onMessage(callback) {\n        this.stateChangeCallbacks.message.push(callback);\n    }\n    /**\n     * Returns the current state of the socket.\n     */\n    connectionState() {\n        switch (this.conn && this.conn.readyState) {\n            case SOCKET_STATES.connecting:\n                return 'connecting';\n            case SOCKET_STATES.open:\n                return 'open';\n            case SOCKET_STATES.closing:\n                return 'closing';\n            default:\n                return 'closed';\n        }\n    }\n    /**\n     * Retuns `true` is the connection is open.\n     */\n    isConnected() {\n        return this.connectionState() === 'open';\n    }\n    /**\n     * Removes a subscription from the socket.\n     *\n     * @param channel An open subscription.\n     */\n    remove(channel) {\n        this.channels = this.channels.filter((c) => c.joinRef() !== channel.joinRef());\n    }\n    channel(topic, chanParams = {}) {\n        let chan = new RealtimeSubscription(topic, chanParams, this);\n        this.channels.push(chan);\n        return chan;\n    }\n    push(data) {\n        let { topic, event, payload, ref } = data;\n        let callback = () => {\n            this.encode(data, (result) => {\n                var _a;\n                (_a = this.conn) === null || _a === void 0 ? void 0 : _a.send(result);\n            });\n        };\n        this.log('push', `${topic} ${event} (${ref})`, payload);\n        if (this.isConnected()) {\n            callback();\n        }\n        else {\n            this.sendBuffer.push(callback);\n        }\n    }\n    onConnMessage(rawMessage) {\n        this.decode(rawMessage.data, (msg) => {\n            let { topic, event, payload, ref } = msg;\n            if (ref && ref === this.pendingHeartbeatRef) {\n                this.pendingHeartbeatRef = null;\n            }\n            this.log('receive', `${payload.status || ''} ${topic} ${event} ${(ref && '(' + ref + ')') || ''}`, payload);\n            this.channels\n                .filter((channel) => channel.isMember(topic))\n                .forEach((channel) => channel.trigger(event, payload, ref));\n            this.stateChangeCallbacks.message.forEach((callback) => callback(msg));\n        });\n    }\n    /**\n     * Returns the URL of the websocket.\n     */\n    endPointURL() {\n        return this._appendParams(this.endPoint, Object.assign({}, this.params, { vsn: VSN }));\n    }\n    /**\n     * Return the next message ref, accounting for overflows\n     */\n    makeRef() {\n        let newRef = this.ref + 1;\n        if (newRef === this.ref) {\n            this.ref = 0;\n        }\n        else {\n            this.ref = newRef;\n        }\n        return this.ref.toString();\n    }\n    _onConnOpen() {\n        this.log('transport', `connected to ${this.endPointURL()}`);\n        this._flushSendBuffer();\n        this.reconnectTimer.reset();\n        // if (!this.conn?.skipHeartbeat) { // Skip heartbeat doesn't exist on w3Socket\n        clearInterval(this.heartbeatTimer);\n        this.heartbeatTimer = (setInterval(() => this._sendHeartbeat(), this.heartbeatIntervalMs));\n        // }\n        this.stateChangeCallbacks.open.forEach((callback) => callback());\n    }\n    _onConnClose(event) {\n        this.log('transport', 'close', event);\n        this._triggerChanError();\n        clearInterval(this.heartbeatTimer);\n        this.reconnectTimer.scheduleTimeout();\n        this.stateChangeCallbacks.close.forEach((callback) => callback(event));\n    }\n    _onConnError(error) {\n        this.log('transport', error.message);\n        this._triggerChanError();\n        this.stateChangeCallbacks.error.forEach((callback) => callback(error));\n    }\n    _triggerChanError() {\n        this.channels.forEach((channel) => channel.trigger(CHANNEL_EVENTS.error));\n    }\n    _appendParams(url, params) {\n        if (Object.keys(params).length === 0) {\n            return url;\n        }\n        const prefix = url.match(/\\?/) ? '&' : '?';\n        const query = new URLSearchParams(params);\n        return `${url}${prefix}${query}`;\n    }\n    _flushSendBuffer() {\n        if (this.isConnected() && this.sendBuffer.length > 0) {\n            this.sendBuffer.forEach((callback) => callback());\n            this.sendBuffer = [];\n        }\n    }\n    _sendHeartbeat() {\n        var _a;\n        if (!this.isConnected()) {\n            return;\n        }\n        if (this.pendingHeartbeatRef) {\n            this.pendingHeartbeatRef = null;\n            this.log('transport', 'heartbeat timeout. Attempting to re-establish connection');\n            (_a = this.conn) === null || _a === void 0 ? void 0 : _a.close(WS_CLOSE_NORMAL, 'hearbeat timeout');\n            return;\n        }\n        this.pendingHeartbeatRef = this.makeRef();\n        this.push({\n            topic: 'phoenix',\n            event: 'heartbeat',\n            payload: {},\n            ref: this.pendingHeartbeatRef,\n        });\n    }\n}\n\nclass SupabaseRealtimeClient {\n    constructor(socket, schema, tableName) {\n        const topic = tableName === '*' ? `realtime:${schema}` : `realtime:${schema}:${tableName}`;\n        this.subscription = socket.channel(topic);\n    }\n    getPayloadRecords(payload) {\n        const records = {\n            new: {},\n            old: {},\n        };\n        if (payload.type === 'INSERT' || payload.type === 'UPDATE') {\n            records.new = convertChangeData(payload.columns, payload.record);\n        }\n        if (payload.type === 'UPDATE' || payload.type === 'DELETE') {\n            records.old = convertChangeData(payload.columns, payload.old_record);\n        }\n        return records;\n    }\n    /**\n     * The event you want to listen to.\n     *\n     * @param event The event\n     * @param callback A callback function that is called whenever the event occurs.\n     */\n    on(event, callback) {\n        this.subscription.on(event, (payload) => {\n            let enrichedPayload = {\n                schema: payload.schema,\n                table: payload.table,\n                commit_timestamp: payload.commit_timestamp,\n                eventType: payload.type,\n                new: {},\n                old: {},\n            };\n            enrichedPayload = Object.assign(Object.assign({}, enrichedPayload), this.getPayloadRecords(payload));\n            callback(enrichedPayload);\n        });\n        return this;\n    }\n    /**\n     * Enables the subscription.\n     */\n    subscribe(callback = () => { }) {\n        this.subscription.onError((e) => callback('SUBSCRIPTION_ERROR', e));\n        this.subscription.onClose(() => callback('CLOSED'));\n        this.subscription\n            .subscribe()\n            .receive('ok', () => callback('SUBSCRIBED'))\n            .receive('error', (e) => callback('SUBSCRIPTION_ERROR', e))\n            .receive('timeout', () => callback('RETRYING_AFTER_TIMEOUT'));\n        return this.subscription;\n    }\n}\n\nclass SupabaseQueryBuilder extends PostgrestQueryBuilder {\n    constructor(url, { headers = {}, schema, realtime, table, }) {\n        super(url, { headers, schema });\n        this._subscription = new SupabaseRealtimeClient(realtime, schema, table);\n        this._realtime = realtime;\n    }\n    /**\n     * Subscribe to realtime changes in your databse.\n     * @param event The database event which you would like to receive updates for, or you can use the special wildcard `*` to listen to all changes.\n     * @param callback A callback that will handle the payload that is sent whenever your database changes.\n     */\n    on(event, callback) {\n        if (!this._realtime.isConnected()) {\n            this._realtime.connect();\n        }\n        return this._subscription.on(event, callback);\n    }\n}\n\nvar __awaiter$5 = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nconst _getErrorMessage$1 = (err) => err.msg || err.message || err.error_description || err.error || JSON.stringify(err);\nconst handleError$1 = (error, reject) => {\n    if (typeof error.json !== 'function') {\n        return reject(error);\n    }\n    error.json().then((err) => {\n        return reject({\n            message: _getErrorMessage$1(err),\n            status: (error === null || error === void 0 ? void 0 : error.status) || 500,\n        });\n    });\n};\nconst _getRequestParams$1 = (method, options, parameters, body) => {\n    const params = { method, headers: (options === null || options === void 0 ? void 0 : options.headers) || {} };\n    if (method === 'GET') {\n        return params;\n    }\n    params.headers = Object.assign({ 'Content-Type': 'application/json' }, options === null || options === void 0 ? void 0 : options.headers);\n    params.body = JSON.stringify(body);\n    return Object.assign(Object.assign({}, params), parameters);\n};\nfunction _handleRequest$1(method, url, options, parameters, body) {\n    return __awaiter$5(this, void 0, void 0, function* () {\n        return new Promise((resolve, reject) => {\n            fetch$1(url, _getRequestParams$1(method, options, parameters, body))\n                .then((result) => {\n                if (!result.ok)\n                    throw result;\n                if (options === null || options === void 0 ? void 0 : options.noResolveJson)\n                    return resolve(result);\n                return result.json();\n            })\n                .then((data) => resolve(data))\n                .catch((error) => handleError$1(error, reject));\n        });\n    });\n}\nfunction get$1(url, options, parameters) {\n    return __awaiter$5(this, void 0, void 0, function* () {\n        return _handleRequest$1('GET', url, options, parameters);\n    });\n}\nfunction post$1(url, body, options, parameters) {\n    return __awaiter$5(this, void 0, void 0, function* () {\n        return _handleRequest$1('POST', url, options, parameters, body);\n    });\n}\nfunction put$1(url, body, options, parameters) {\n    return __awaiter$5(this, void 0, void 0, function* () {\n        return _handleRequest$1('PUT', url, options, parameters, body);\n    });\n}\nfunction remove$1(url, body, options, parameters) {\n    return __awaiter$5(this, void 0, void 0, function* () {\n        return _handleRequest$1('DELETE', url, options, parameters, body);\n    });\n}\n\nvar __awaiter$6 = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nclass StorageBucketApi {\n    constructor(url, headers = {}) {\n        this.url = url;\n        this.headers = headers;\n    }\n    /**\n     * Retrieves the details of all Storage buckets within an existing product.\n     */\n    listBuckets() {\n        return __awaiter$6(this, void 0, void 0, function* () {\n            try {\n                const data = yield get$1(`${this.url}/bucket`, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    /**\n     * Retrieves the details of an existing Storage bucket.\n     *\n     * @param id The unique identifier of the bucket you would like to retrieve.\n     */\n    getBucket(id) {\n        return __awaiter$6(this, void 0, void 0, function* () {\n            try {\n                const data = yield get$1(`${this.url}/bucket/${id}`, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    /**\n     * Creates a new Storage bucket\n     *\n     * @param id A unique identifier for the bucket you are creating.\n     * @returns newly created bucket id\n     */\n    createBucket(id, options = { public: false }) {\n        return __awaiter$6(this, void 0, void 0, function* () {\n            try {\n                const data = yield post$1(`${this.url}/bucket`, { id, name: id, public: options.public }, { headers: this.headers });\n                return { data: data.name, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    /**\n     * Updates a new Storage bucket\n     *\n     * @param id A unique identifier for the bucket you are creating.\n     */\n    updateBucket(id, options) {\n        return __awaiter$6(this, void 0, void 0, function* () {\n            try {\n                const data = yield put$1(`${this.url}/bucket/${id}`, { id, name: id, public: options.public }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    /**\n     * Removes all objects inside a single bucket.\n     *\n     * @param id The unique identifier of the bucket you would like to empty.\n     */\n    emptyBucket(id) {\n        return __awaiter$6(this, void 0, void 0, function* () {\n            try {\n                const data = yield post$1(`${this.url}/bucket/${id}/empty`, {}, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    /**\n     * Deletes an existing bucket. A bucket can't be deleted with existing objects inside it.\n     * You must first `empty()` the bucket.\n     *\n     * @param id The unique identifier of the bucket you would like to delete.\n     */\n    deleteBucket(id) {\n        return __awaiter$6(this, void 0, void 0, function* () {\n            try {\n                const data = yield remove$1(`${this.url}/bucket/${id}`, {}, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n}\n\nconst isBrowser$1 = () => typeof window !== 'undefined';\n\nvar __awaiter$7 = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nconst DEFAULT_SEARCH_OPTIONS = {\n    limit: 100,\n    offset: 0,\n    sortBy: {\n        column: 'name',\n        order: 'asc',\n    },\n};\nconst DEFAULT_FILE_OPTIONS = {\n    cacheControl: '3600',\n};\nclass StorageFileApi {\n    constructor(url, headers = {}, bucketId) {\n        this.url = url;\n        this.headers = headers;\n        this.bucketId = bucketId;\n    }\n    /**\n     * Uploads a file to an existing bucket.\n     *\n     * @param path The relative file path. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to upload.\n     * @param file The File object to be stored in the bucket.\n     * @param fileOptions HTTP headers. For example `cacheControl`\n     */\n    upload(path, file, fileOptions) {\n        return __awaiter$7(this, void 0, void 0, function* () {\n            try {\n                if (!isBrowser$1())\n                    throw new Error('No browser detected.');\n                const formData = new FormData();\n                const options = Object.assign(Object.assign({}, DEFAULT_FILE_OPTIONS), fileOptions);\n                formData.append('cacheControl', options.cacheControl);\n                formData.append('', file, file.name);\n                const _path = this._getFinalPath(path);\n                const res = yield fetch(`${this.url}/object/${_path}`, {\n                    method: 'POST',\n                    body: formData,\n                    headers: Object.assign({}, this.headers),\n                });\n                if (res.ok) {\n                    // const data = await res.json()\n                    // temporary fix till backend is updated to the latest storage-api version\n                    return { data: { Key: _path }, error: null };\n                }\n                else {\n                    const error = yield res.json();\n                    return { data: null, error };\n                }\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    /**\n     * Replaces an existing file at the specified path with a new one.\n     *\n     * @param path The relative file path. Should be of the format `folder/subfolder`. The bucket already exist before attempting to upload.\n     * @param file The file object to be stored in the bucket.\n     * @param fileOptions HTTP headers. For example `cacheControl`\n     */\n    update(path, file, fileOptions) {\n        return __awaiter$7(this, void 0, void 0, function* () {\n            try {\n                if (!isBrowser$1())\n                    throw new Error('No browser detected.');\n                const formData = new FormData();\n                const options = Object.assign(Object.assign({}, DEFAULT_FILE_OPTIONS), fileOptions);\n                formData.append('cacheControl', options.cacheControl);\n                formData.append('', file, file.name);\n                const _path = this._getFinalPath(path);\n                const res = yield fetch(`${this.url}/object/${_path}`, {\n                    method: 'PUT',\n                    body: formData,\n                    headers: Object.assign({}, this.headers),\n                });\n                if (res.ok) {\n                    // const data = await res.json()\n                    // temporary fix till backend is updated to the latest storage-api version\n                    return { data: { Key: _path }, error: null };\n                }\n                else {\n                    const error = yield res.json();\n                    return { data: null, error };\n                }\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    /**\n     * Moves an existing file, optionally renaming it at the same time.\n     *\n     * @param fromPath The original file path, including the current file name. For example `folder/image.png`.\n     * @param toPath The new file path, including the new file name. For example `folder/image-copy.png`.\n     */\n    move(fromPath, toPath) {\n        return __awaiter$7(this, void 0, void 0, function* () {\n            try {\n                const data = yield post$1(`${this.url}/object/move`, { bucketId: this.bucketId, sourceKey: fromPath, destinationKey: toPath }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    /**\n     * Create signed url to download file without requiring permissions. This URL can be valid for a set number of seconds.\n     *\n     * @param path The file path to be downloaded, including the current file name. For example `folder/image.png`.\n     * @param expiresIn The number of seconds until the signed URL expires. For example, `60` for a URL which is valid for one minute.\n     */\n    createSignedUrl(path, expiresIn) {\n        return __awaiter$7(this, void 0, void 0, function* () {\n            try {\n                const _path = this._getFinalPath(path);\n                let data = yield post$1(`${this.url}/object/sign/${_path}`, { expiresIn }, { headers: this.headers });\n                const signedURL = `${this.url}${data.signedURL}`;\n                data = { signedURL };\n                return { data, error: null, signedURL };\n            }\n            catch (error) {\n                return { data: null, error, signedURL: null };\n            }\n        });\n    }\n    /**\n     * Downloads a file.\n     *\n     * @param path The file path to be downloaded, including the path and file name. For example `folder/image.png`.\n     */\n    download(path) {\n        return __awaiter$7(this, void 0, void 0, function* () {\n            try {\n                const _path = this._getFinalPath(path);\n                const res = yield get$1(`${this.url}/object/${_path}`, {\n                    headers: this.headers,\n                    noResolveJson: true,\n                });\n                const data = yield res.blob();\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    /**\n     * Retrieve URLs for assets in public buckets\n     *\n     * @param path The file path to be downloaded, including the path and file name. For example `folder/image.png`.\n     */\n    getPublicUrl(path) {\n        try {\n            const _path = this._getFinalPath(path);\n            const publicURL = `${this.url}/object/public/${_path}`;\n            const data = { publicURL };\n            return { data, error: null, publicURL };\n        }\n        catch (error) {\n            return { data: null, error, publicURL: null };\n        }\n    }\n    /**\n     * Deletes files within the same bucket\n     *\n     * @param paths An array of files to be deletes, including the path and file name. For example [`folder/image.png`].\n     */\n    remove(paths) {\n        return __awaiter$7(this, void 0, void 0, function* () {\n            try {\n                const data = yield remove$1(`${this.url}/object/${this.bucketId}`, { prefixes: paths }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    /**\n     * Get file metadata\n     * @param id the file id to retrieve metadata\n     */\n    // async getMetadata(id: string): Promise<{ data: Metadata | null; error: Error | null }> {\n    //   try {\n    //     const data = await get(`${this.url}/metadata/${id}`, { headers: this.headers })\n    //     return { data, error: null }\n    //   } catch (error) {\n    //     return { data: null, error }\n    //   }\n    // }\n    /**\n     * Update file metadata\n     * @param id the file id to update metadata\n     * @param meta the new file metadata\n     */\n    // async updateMetadata(\n    //   id: string,\n    //   meta: Metadata\n    // ): Promise<{ data: Metadata | null; error: Error | null }> {\n    //   try {\n    //     const data = await post(`${this.url}/metadata/${id}`, { ...meta }, { headers: this.headers })\n    //     return { data, error: null }\n    //   } catch (error) {\n    //     return { data: null, error }\n    //   }\n    // }\n    /**\n     * Lists all the files within a bucket.\n     * @param path The folder path.\n     * @param options Search options, including `limit`, `offset`, and `sortBy`.\n     * @param parameters Fetch parameters, currently only supports `signal`, which is an AbortController's signal\n     */\n    list(path, options, parameters) {\n        return __awaiter$7(this, void 0, void 0, function* () {\n            try {\n                const body = Object.assign(Object.assign(Object.assign({}, DEFAULT_SEARCH_OPTIONS), options), { prefix: path || '' });\n                const data = yield post$1(`${this.url}/object/list/${this.bucketId}`, body, { headers: this.headers }, parameters);\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    _getFinalPath(path) {\n        return `${this.bucketId}/${path}`;\n    }\n}\n\nclass SupabaseStorageClient extends StorageBucketApi {\n    constructor(url, headers = {}) {\n        super(url, headers);\n    }\n    /**\n     * Perform file operation in a bucket.\n     *\n     * @param id The bucket id to operate on.\n     */\n    from(id) {\n        return new StorageFileApi(this.url, this.headers, id);\n    }\n}\n\nvar __awaiter$8 = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nconst DEFAULT_OPTIONS$1 = {\n    schema: 'public',\n    autoRefreshToken: true,\n    persistSession: true,\n    detectSessionInUrl: true,\n    localStorage: globalThis.localStorage,\n    headers: DEFAULT_HEADERS,\n};\n/**\n * Supabase Client.\n *\n * An isomorphic Javascript client for interacting with Postgres.\n */\nclass SupabaseClient {\n    /**\n     * Create a new client for use in the browser.\n     * @param supabaseUrl The unique Supabase URL which is supplied when you create a new project in your project dashboard.\n     * @param supabaseKey The unique Supabase Key which is supplied when you create a new project in your project dashboard.\n     * @param options.schema You can switch in between schemas. The schema needs to be on the list of exposed schemas inside Supabase.\n     * @param options.autoRefreshToken Set to \"true\" if you want to automatically refresh the token before expiring.\n     * @param options.persistSession Set to \"true\" if you want to automatically save the user session into local storage.\n     * @param options.detectSessionInUrl Set to \"true\" if you want to automatically detects OAuth grants in the URL and signs in the user.\n     * @param options.headers Any additional headers to send with each network request.\n     */\n    constructor(supabaseUrl, supabaseKey, options) {\n        this.supabaseUrl = supabaseUrl;\n        this.supabaseKey = supabaseKey;\n        if (!supabaseUrl)\n            throw new Error('supabaseUrl is required.');\n        if (!supabaseKey)\n            throw new Error('supabaseKey is required.');\n        const settings = Object.assign(Object.assign({}, DEFAULT_OPTIONS$1), options);\n        this.restUrl = `${supabaseUrl}/rest/v1`;\n        this.realtimeUrl = `${supabaseUrl}/realtime/v1`.replace('http', 'ws');\n        this.authUrl = `${supabaseUrl}/auth/v1`;\n        this.storageUrl = `${supabaseUrl}/storage/v1`;\n        this.schema = settings.schema;\n        this.auth = this._initSupabaseAuthClient(settings);\n        this.realtime = this._initRealtimeClient();\n        // In the future we might allow the user to pass in a logger to receive these events.\n        // this.realtime.onOpen(() => console.log('OPEN'))\n        // this.realtime.onClose(() => console.log('CLOSED'))\n        // this.realtime.onError((e: Error) => console.log('Socket error', e))\n    }\n    /**\n     * Supabase Storage allows you to manage user-generated content, such as photos or videos.\n     */\n    get storage() {\n        return new SupabaseStorageClient(this.storageUrl, this._getAuthHeaders());\n    }\n    /**\n     * Perform a table operation.\n     *\n     * @param table The table name to operate on.\n     */\n    from(table) {\n        const url = `${this.restUrl}/${table}`;\n        return new SupabaseQueryBuilder(url, {\n            headers: this._getAuthHeaders(),\n            schema: this.schema,\n            realtime: this.realtime,\n            table,\n        });\n    }\n    /**\n     * Perform a stored procedure call.\n     *\n     * @param fn  The function name to call.\n     * @param params  The parameters to pass to the function call.\n     */\n    rpc(fn, params) {\n        const rest = this._initPostgRESTClient();\n        return rest.rpc(fn, params);\n    }\n    /**\n     * Removes an active subscription and returns the number of open connections.\n     *\n     * @param subscription The subscription you want to remove.\n     */\n    removeSubscription(subscription) {\n        return new Promise((resolve) => __awaiter$8(this, void 0, void 0, function* () {\n            try {\n                yield this._closeSubscription(subscription);\n                const openSubscriptions = this.getSubscriptions().length;\n                if (!openSubscriptions) {\n                    const { error } = yield this.realtime.disconnect();\n                    if (error)\n                        return resolve({ error });\n                }\n                return resolve({ error: null, data: { openSubscriptions } });\n            }\n            catch (error) {\n                return resolve({ error });\n            }\n        }));\n    }\n    _closeSubscription(subscription) {\n        return __awaiter$8(this, void 0, void 0, function* () {\n            if (!subscription.isClosed()) {\n                yield this._closeChannel(subscription);\n            }\n        });\n    }\n    /**\n     * Returns an array of all your subscriptions.\n     */\n    getSubscriptions() {\n        return this.realtime.channels;\n    }\n    _initSupabaseAuthClient({ autoRefreshToken, persistSession, detectSessionInUrl, localStorage, }) {\n        return new SupabaseAuthClient({\n            url: this.authUrl,\n            headers: {\n                Authorization: `Bearer ${this.supabaseKey}`,\n                apikey: `${this.supabaseKey}`,\n            },\n            autoRefreshToken,\n            persistSession,\n            detectSessionInUrl,\n            localStorage,\n        });\n    }\n    _initRealtimeClient() {\n        return new RealtimeClient(this.realtimeUrl, {\n            params: { apikey: this.supabaseKey },\n        });\n    }\n    _initPostgRESTClient() {\n        return new PostgrestClient(this.restUrl, {\n            headers: this._getAuthHeaders(),\n            schema: this.schema,\n        });\n    }\n    _getAuthHeaders() {\n        var _a, _b;\n        const headers = {};\n        const authBearer = (_b = (_a = this.auth.session()) === null || _a === void 0 ? void 0 : _a.access_token) !== null && _b !== void 0 ? _b : this.supabaseKey;\n        headers['apikey'] = this.supabaseKey;\n        headers['Authorization'] = `Bearer ${authBearer}`;\n        return headers;\n    }\n    _closeChannel(subscription) {\n        return new Promise((resolve, reject) => {\n            subscription\n                .unsubscribe()\n                .receive('ok', () => {\n                this.realtime.remove(subscription);\n                return resolve(true);\n            })\n                .receive('error', (e) => reject(e));\n        });\n    }\n}\n\n/**\n * Creates a new Supabase Client.\n */\nconst createClient = (supabaseUrl, supabaseKey, options) => {\n    return new SupabaseClient(supabaseUrl, supabaseKey, options);\n};\n\nexport { createClient };\n", "const div = document.getElementById('fingerprint')\nconst rect = div.getBoundingClientRect()\nconst x = rect.left\nconst y = rect.top\nconst width = rect.width\nconst height = rect.height\nconst radius = width / 1.665\n\nconst stratify = d3.cluster().size([2 * Math.PI, radius - 100])\n\nconst idColors = [\n  '#4EA8BA',\n  '#4EA8BA',\n  '#46AAB3',\n  '#7B9FE3',\n  '#9A99FF',\n  '#65A4CF',\n]\nconst idNames = [\n  'self-ethicist',\n  'others-ethicist',\n  'paid work',\n  'years in field',\n  'education',\n  'career path',\n]\n\nconst themeColors = [\n  '#CB9AC6',\n  '#FDCC9A',\n  '#B668AA',\n  '#D66B6E',\n  '#DC9AA2',\n  '#8B6BAA',\n  '#EB9C84',\n  '#CB9AC6',\n]\nconst themeNums = [0, 1, 2, 3, 12, 23, 13, 123]\nconst themeNames = [\n  'topics',\n  'domain',\n  'outputs',\n  'audiences',\n  'collab type',\n  'collab field',\n]\n\nconst colID = d3.scaleOrdinal().domain(idNames).range(idColors)\nconst colTHEME = d3.scaleOrdinal().domain(themeNums).range(themeColors)\n\n// dendro :: (Object, Boolean) -> undefined\nexport function dendro(data, init) {\n  let svg\n  if (init) {\n    svg = d3\n      .selectAll('.fingerprint-container')\n      .append('svg')\n      .attr('width', width)\n      .attr('height', height)\n      .append('g')\n      .attr('transform', 'translate(' + width / 2 + ',' + radius / 1.2 + ')')\n  } else {\n    svg = d3.selectAll('.fingerprint-container').selectAll('svg').selectAll('g')\n  }\n  const [dataFirst, dataSecond, ignoreMe] = data.children\n  const dataSlim = { ...data, children: [dataFirst, dataSecond] }\n  const sortData = d3.hierarchy(dataSlim)\n  const root = stratify(sortData)\n\n  // Gray section drawing\n  if (init) {\n    svg\n      .append('g')\n      .attr('fill', 'none')\n      .attr('class', 'thedraw')\n      .selectAll('path')\n      .data(root.links())\n      .join('path')\n      .attr('class', 'drawing')\n      .attr('stroke-width', function (d) {\n        if (d.target.data.value != undefined && d.target.data.value < 1) {\n          return 1\n        } else {\n          return 1.5\n        }\n      })\n      .attr(\n        'd',\n        d3\n          .linkRadial()\n          .angle(function (d) {\n            return d.x\n          })\n          .radius(function (d) {\n            return d.y\n          })\n      )\n      .attr('stroke-opacity', function (d) {\n        if (d.target.data.value > 0) {\n          return 1\n        } else {\n          return 0.5\n        }\n      })\n      .attr('stroke', function (d) {\n        if (d.target.data.value >= 0) {\n          for (let i = 0; i < idNames.length; i++) {\n            if (d.source.data.name == idNames[i]) {\n              return colID(d.source.data.name)\n            }\n          }\n          for (let j = 0; j < idNames.length; j++) {\n            if (d.source.data.name == themeNames[j]) {\n              return colTHEME(d.target.data.value)\n            }\n          }\n        } else {\n          return 'lightgrey'\n        }\n      })\n  } else {\n    svg\n      .selectAll('g.thedraw')\n      .selectAll('path')\n      .data(root.links())\n      .join('path')\n      .attr('class', 'drawing')\n      .attr('stroke-width', function (d) {\n        if (d.target.data.value != undefined && d.target.data.value < 1) {\n          return 1\n        } else {\n          return 1.5\n        }\n      })\n      .attr(\n        'd',\n        d3\n          .linkRadial()\n          .angle(function (d) {\n            return d.x\n          })\n          .radius(function (d) {\n            return d.y\n          })\n      )\n      .attr('stroke-opacity', function (d) {\n        if (d.target.data.value > 0) {\n          return 1\n        } else {\n          return 0.5\n        }\n      })\n      .attr('stroke', function (d) {\n        if (d.target.data.value >= 0) {\n          for (let i = 0; i < idNames.length; i++) {\n            if (d.source.data.name == idNames[i]) {\n              return colID(d.source.data.name)\n            }\n          }\n          for (let j = 0; j < idNames.length; j++) {\n            if (d.source.data.name == themeNames[j]) {\n              return colTHEME(d.target.data.value)\n            }\n          }\n        } else {\n          return 'lightgrey'\n        }\n      })\n  }\n\n  // remove old ones\n  svg.selectAll('g').selectAll('circle').remove()\n\n  svg\n    .append('g')\n    .selectAll('circle')\n    .data(root.descendants())\n    .join('circle')\n    .filter(function (d) {\n      return d.data.value > 0\n    })\n    .attr(\n      'transform',\n      (d) => `\n          rotate(${(d.x * 180) / Math.PI - 90})\n          translate(${d.y},0)\n        `\n    )\n    .attr('fill', 'white')\n    .attr('opacity', 0.7)\n    .attr('r', 2.5)\n    .attr('class', function (d) {\n      return d.data.name\n    })\n\n  // write text on initial\n  if (init) {\n    svg\n      .append('g')\n      // .attr(\"font-family\", \"sans-serif\")\n      .attr('font-size', 10)\n      .attr('stroke-linejoin', 'round')\n      .attr('stroke-width', 3)\n      .selectAll('text')\n      .data(root.descendants())\n      .join('text')\n      .filter(function (d) {\n        return d.children\n      })\n      .attr('class', 'dendroText')\n      .attr(\n        'transform',\n        (d) => `\n          rotate(${(d.x * 180) / Math.PI - 90})\n          translate(${d.y},0) \n          rotate(${d.x >= Math.PI ? 180 : 0})\n        `\n      )\n      .attr('dy', '0.31em')\n      // .attr(\"dy\", \"-0.9em\")\n      .attr('x', (d) => (d.x < Math.PI === !d.children ? 6 : -6))\n      .attr('text-anchor', (d) =>\n        d.x < Math.PI === !d.children ? 'start' : 'end'\n      )\n      .attr('fill', function (d) {\n        if (d.children) {\n          return 'none'\n        }\n      })\n      .text((d) => d.data.name)\n      .clone(true)\n      .lower()\n    // .attr(\"stroke\", \"white\");\n  }\n}\n\nd3.selectAll('.dendro-labels-on').on('click', function () {\n  d3.selectAll('.dendroText').transition().attr('fill', 'white')\n})\nd3.selectAll('.dendro-labels-off').on('click', function () {\n  d3.selectAll('.dendroText').transition().attr('fill', 'none')\n})\n", "const div = document.getElementById('wheel-container')\nconst { width, height } = div.getBoundingClientRect()\n\nconst leftMargin = 100\nconst topMargin = leftMargin\nlet tooltip = d3.select('#tooltip')\n    .style('opacity', 0);\n// wheel :: (Object, Boolean) -> undefined\nexport function wheel(data, init) {\n  d3.select('#wheel-container').selectAll('svg').remove()\n\n  let svg = d3\n    .select('#wheel-container')\n    .append('svg')\n    .attr('width', width)\n    .attr('height', height)\n    .attr('viewBox', [0, 0, width, height])\n\n  let g = svg.append('g')\n\n  const figDepth = 2\n  const paddingX = width / 15\n  const paddingY = height / 14\n\n  const centerEX = width / 2 - paddingX * 2.2\n  const centerEH = height / figDepth\n\n  const innerCircRad = width / 40\n  const smallMarg = innerCircRad / 2\n  //CHANGES HERE: CAREFUL!\n  const maxRad = 40 // (height/10);\n  const minRad = 7.5\n  const maxBar = minRad * 4\n\n  const idColors = [\n    '#4EA8BA',\n    '#4EA8BA',\n    '#46AAB3',\n    '#7B9FE3',\n    '#9A99FF',\n    '#65A4CF',\n  ]\n  const idNames = [\n    'self-ethicist',\n    'others-ethicist',\n    'paid work',\n    'years in field',\n    'education',\n    'career path',\n  ]\n  const themeColors = [\n    '#CB9AC6',\n    '#FDCC9A',\n    '#B668AA',\n    '#D66B6E',\n    '#DC9AA2',\n    '#8B6BAA',\n    '#EB9C84',\n    '#CB9AC6',\n  ]\n  const themeNums = [0, 1, 2, 3, 12, 23, 13, 123]\n  const strokeHighlight = 0.5\n  const strokeNormal = 0.2\n  const strokeMin = 0.2\n\n  const colID = d3.scaleOrdinal().domain(idNames).range(idColors)\n  const colTHEME = d3.scaleOrdinal().domain(themeNums).range(themeColors)\n  const posID = [\n    {\n      x: centerEX + paddingX + smallMarg * 2,\n      y: centerEH - paddingY - smallMarg,\n      rot: 15,\n      id: 'self-ethicist',\n    },\n    {\n      x: centerEX + paddingX - smallMarg,\n      y: centerEH - paddingY - smallMarg * 3,\n      rot: 350,\n      id: 'others-ethicist',\n    },\n    {\n      x: centerEX + paddingX + smallMarg * 2,\n      y: centerEH - smallMarg,\n      rot: 80,\n      id: 'paid work',\n    },\n    {\n      x: centerEX - paddingX / 2,\n      y: centerEH + paddingY / 2 - smallMarg,\n      rot: 180,\n      id: 'years in field',\n    },\n    {\n      x: centerEX + paddingX * 2,\n      y: centerEH + paddingY,\n      rot: 80,\n      id: 'education',\n    },\n    {\n      x: centerEX - paddingX / 2,\n      y: centerEH - paddingY - smallMarg * 3,\n      rot: 250,\n      id: 'career path',\n    },\n  ]\n  const posTh = [\n    {\n      x: centerEX + paddingX * 3,\n      y: centerEH - paddingY - smallMarg * 3,\n      rot: 300,\n      id: 'topics',\n    },\n    {\n      x: centerEX + paddingX * 3 + smallMarg,\n      y: centerEH - paddingY - smallMarg,\n      rot: 80,\n      id: 'domain',\n    },\n    {\n      x: centerEX + paddingX * 4.5,\n      y: centerEH + paddingY / 2,\n      rot: 65,\n      id: 'outputs',\n    },\n    {\n      x: centerEX + paddingX * 4.9,\n      y: centerEH + paddingY / 2 + maxBar * 1.5,\n      rot: 70,\n      id: 'audiences',\n    },\n    {\n      x: centerEX + paddingX * 4.6,\n      y: centerEH - paddingY - smallMarg * 4,\n      rot: 300,\n      id: 'collab type',\n    },\n    {\n      x: centerEX + paddingX * 5,\n      y: centerEH - paddingY - smallMarg * 3,\n      rot: 40,\n      id: 'collab field',\n    },\n  ]\n\n  const idLine = [posID[5], posID[1], posID[0], posID[2], posID[4]]\n  const themeLine = [posTh[5], posTh[4], posTh[0], posTh[1], posTh[2], posTh[3]]\n  const cnctLine = [posID[0], posTh[0]]\n  const yearLine = [posID[3], posID[0]]\n  const originX = 0\n  const originY = 0\n\n  const idVals = []\n  const theVals = []\n  let maxTotal = 0\n  let maxTheme\n  let maxId = 0\n  const barScale = d3.scaleLinear().domain([0, maxTotal]).range([1, maxBar])\n\n  const yearsMax = 52\n  const yearScale = d3.scaleLinear().domain([0, yearsMax]).range([0, 360])\n\n  const widthScale = d3.scaleLinear().domain([0, 100]).range([5, 0.5])\n\n  // const radiusScale = d3.scaleLinear()\n  // \t.domain([2, 52])\n  // \t.range([innerCircRad/2, outerCircleRadius])\n  const radiusScale = d3.scaleLinear().domain([2, 52]).range([minRad, maxRad])\n\n  const barwide = 3\n  const barSpaceSm = minRad + 2\n  const barSpace = 3\n\n  const barSpaceEd = 3\n  const barSpaceCo = 4\n  const barSpaceCa = 6\n  const barSpaceCd = 5\n  const barSpaceTo = minRad\n\n  const yearsRadius = maxRad / 1.8\n  let lengths = []\n  const ft = 8\n\n  function measureText(string, fontSize = ft) {\n    const widths = [\n      0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n      0, 0, 0, 0, 0, 0, 0, 0.278125, 0.278125, 0.35625, 0.55625, 0.55625,\n      0.890625, 0.6671875, 0.1921875, 0.334375, 0.334375, 0.390625, 0.584375,\n      0.278125, 0.334375, 0.278125, 0.303125, 0.55625, 0.55625, 0.55625,\n      0.55625, 0.55625, 0.55625, 0.55625, 0.55625, 0.55625, 0.55625, 0.278125,\n      0.278125, 0.5859375, 0.584375, 0.5859375, 0.55625, 1.015625, 0.6671875,\n      0.6671875, 0.7234375, 0.7234375, 0.6671875, 0.6109375, 0.778125,\n      0.7234375, 0.278125, 0.5, 0.6671875, 0.55625, 0.834375, 0.7234375,\n      0.778125, 0.6671875, 0.778125, 0.7234375, 0.6671875, 0.6109375, 0.7234375,\n      0.6671875, 0.9453125, 0.6671875, 0.6671875, 0.6109375, 0.278125, 0.35625,\n      0.278125, 0.478125, 0.55625, 0.334375, 0.55625, 0.55625, 0.5, 0.55625,\n      0.55625, 0.278125, 0.55625, 0.55625, 0.2234375, 0.2421875, 0.5, 0.2234375,\n      0.834375, 0.55625, 0.55625, 0.55625, 0.55625, 0.334375, 0.5, 0.278125,\n      0.55625, 0.5, 0.7234375, 0.5, 0.5, 0.5, 0.35625, 0.2609375, 0.3546875,\n      0.590625,\n    ]\n    const avg = 0.5293256578947368\n    return (\n      string\n        .split('')\n        .map((c) =>\n          c.charCodeAt(0) < widths.length ? widths[c.charCodeAt(0)] : avg\n        )\n        .reduce((cur, acc) => acc + cur) * fontSize\n    )\n  }\n  let sdata = data.children\n\n  const gid = g\n    .selectAll('.gID')\n    .data(sdata[0].children)\n    .join('g')\n    .attr('class', function (d, i) {\n      return d.name\n    })\n    .attr('transform', function (d, i) {\n      if (posID[i].id == d.name) {\n        return `translate(${posID[i].x}, ${posID[i].y}), rotate(${posID[i].rot},0,0)`\n      }\n    })\n\n  const innerCirc = gid\n    .append('circle')\n    .attr('class', 'innerCirc')\n    .attr('cx', 0)\n    .attr('cy', 0)\n    .attr('r', function (d) {\n      lengths.push({ name: d.name, num: d.children.length })\n      if (d.name == 'years in field') {\n        return yearsRadius\n      } else {\n        return radiusScale(d.children.length)\n      }\n    })\n    .attr('fill', 'none')\n    .attr('stroke', 'lightgrey')\n\n  const gthe = g\n    .selectAll('.gTHE')\n    .data(sdata[1].children)\n    .join('g')\n    .attr('class', function (d) {\n      return d.name\n    })\n    .attr('transform', function (d, i) {\n      return `translate(${posTh[i].x}, ${posTh[i].y}), rotate(${posTh[i].rot},0,0)`\n    })\n  const innerCircTheme = gthe\n    .append('circle')\n    .attr('class', 'innerCircTheme')\n    .attr('cx', originX)\n    .attr('cy', originY)\n    .attr('r', function (d) {\n      lengths.push({ name: d.name, num: d.children.length })\n      return radiusScale(d.children.length)\n    })\n    .attr('fill', 'none')\n    .attr('stroke', 'lightgrey')\n\n  const rectMaxID = gid\n    .selectAll('.rectMaxID')\n    .data((d) => d.children)\n    .join('rect')\n    .attr('class', 'rectMaxID')\n    .attr('width', function (d, i) {\n      if (d.q == 'years' && yearsRadius > 0) {\n        return widthScale(yearsMax)\n      } else {\n        return barwide\n      }\n    })\n    .attr('x', function (d) {\n      let radiusHere\n      for (let i = 0; i < lengths.length; i++) {\n        if (d.parent == lengths[i].name) {\n          radiusHere = radiusScale(lengths[i].num)\n        }\n      }\n      if (d.q == 'years' && yearsRadius > 0) {\n        return originX + yearsRadius * Math.sin(0)\n      } else {\n        return originX + radiusHere * Math.sin(0)\n      }\n    })\n    .attr('y', function (d) {\n      let radiusHere\n      for (let i = 0; i < lengths.length; i++) {\n        if (d.parent == lengths[i].name) {\n          radiusHere = radiusScale(lengths[i].num)\n        }\n      }\n      if (d.q == 'years' && yearsRadius > 0) {\n        return originY + yearsRadius * Math.cos(0)\n      } else {\n        return originY + radiusHere * Math.cos(0)\n      }\n    })\n    .attr('transform', function (d, i) {\n      if (d.q == 'years' && yearsRadius > 0) {\n        return 'rotate(' + yearScale(i) + ', 0, 0)'\n      }\n      if (d.parent == 'education') {\n        return 'rotate(' + (180 + barwide * barSpaceEd * i) + ', 0, 0)'\n      }\n      if (d.parent == 'career path') {\n        return 'rotate(' + (180 + barwide * barSpaceCa * i) + ', 0, 0)'\n      }\n      if (\n        d.parent == 'self-ethicist' ||\n        d.parent == 'others-ethicist' ||\n        d.parent == 'paid work'\n      ) {\n        return 'rotate(' + (180 + barwide * barSpaceSm * i) + ', 0, 0)'\n      } else {\n        return 'rotate(' + (180 + barwide * barSpace * i) + ', 0, 0)'\n      }\n    })\n    .attr('fill', 'none')\n    .style('stroke-dasharray', '1, 4')\n    .attr('stroke', function (d) {\n      return colID(d.parent)\n    })\n    .attr('stroke-width', strokeMin)\n    .attr('height', maxBar)\n\n  let rectIdentity = gid\n    .selectAll('.rectID')\n    .data((d) => d.children)\n    .join('rect')\n    .attr('class', function (d, i) {\n      idVals.push(d.total)\n      return 'rectID'\n    })\n    .attr('width', function (d, i) {\n      if (d.q == 'years' && yearsRadius > 0) {\n        return widthScale(yearsMax)\n      } else {\n        return barwide\n      }\n    })\n    .attr('fill', function (d) {\n      if (d.value == 1) {\n        return colID(d.parent)\n      } else {\n        return 'black'\n      }\n    })\n    .attr('stroke', function (d) {\n      return colID(d.parent)\n    })\n    .attr('stroke-width', function (d) {\n      if (d.value == 1) {\n        return strokeHighlight\n      } else {\n        return strokeNormal\n      }\n    })\n    .attr('x', function (d) {\n      let radiusHere\n      for (let i = 0; i < lengths.length; i++) {\n        if (d.parent == lengths[i].name) {\n          radiusHere = radiusScale(lengths[i].num)\n        }\n      }\n      if (d.q == 'years' && yearsRadius > 0) {\n        return originX + yearsRadius * Math.sin(0)\n      } else {\n        return originX + radiusHere * Math.sin(0)\n      }\n    })\n    .attr('y', function (d) {\n      let radiusHere\n      for (let i = 0; i < lengths.length; i++) {\n        if (d.parent == lengths[i].name) {\n          radiusHere = radiusScale(lengths[i].num)\n        }\n      }\n      if (d.q == 'years' && yearsRadius > 0) {\n        return originY + yearsRadius * Math.cos(0)\n      } else {\n        return originY + radiusHere * Math.cos(0)\n      }\n    })\n    .attr('transform', function (d, i) {\n      if (d.q == 'years' && yearsRadius > 0) {\n        return 'rotate(' + yearScale(i) + ', 0, 0)'\n      }\n      if (d.parent == 'education') {\n        return 'rotate(' + (180 + barwide * barSpaceEd * i) + ', 0, 0)'\n      }\n      if (d.parent == 'career path') {\n        return 'rotate(' + (180 + barwide * barSpaceCa * i) + ', 0, 0)'\n      }\n      if (\n        d.parent == 'self-ethicist' ||\n        d.parent == 'others-ethicist' ||\n        d.parent == 'paid work'\n      ) {\n        return 'rotate(' + (180 + barwide * barSpaceSm * i) + ', 0, 0)'\n      } else {\n        return 'rotate(' + (180 + barwide * barSpace * i) + ', 0, 0)'\n      }\n    })\n    .attr('height', 0)\n    .on('mouseenter', mouseEnterID)\n    .on('mouseleave', mouseLeave)\n  maxId = d3.max(idVals)\n\n  const rectMaxTH = gthe\n    .selectAll('.rectMaxTH')\n    .data((d) => d.children)\n    .join('rect')\n    .attr('class', 'rectMaxTH')\n    .attr('width', function (d, i) {\n      if (d.q == 'years' && yearsRadius > 0) {\n        return widthScale(yearsMax)\n      } else {\n        return barwide\n      }\n    })\n    .attr('fill', 'none')\n    .attr('x', function (d) {\n      let radiusHere\n      for (let i = 0; i < lengths.length; i++) {\n        if (d.parent == lengths[i].name) {\n          radiusHere = radiusScale(lengths[i].num)\n        }\n      }\n      return originX + radiusHere * Math.sin(0)\n    })\n    .attr('y', function (d) {\n      let radiusHere\n      for (let i = 0; i < lengths.length; i++) {\n        if (d.parent == lengths[i].name) {\n          radiusHere = radiusScale(lengths[i].num)\n        }\n      }\n      return originX + radiusHere * Math.cos(0)\n    })\n    .attr('transform', function (d, i) {\n      if (d.parent == 'collab field') {\n        return 'rotate(' + (180 + barwide * barSpaceCo * i) + ', 0, 0)'\n      }\n      if (\n        d.parent == 'domain' ||\n        d.parent == 'outputs' ||\n        d.parent == 'audiences'\n      ) {\n        return 'rotate(' + (180 + barwide * barSpaceCd * i) + ', 0, 0)'\n      }\n      if (d.parent == 'topics' || d.parent == 'collab type') {\n        return 'rotate(' + (180 + barwide * barSpaceTo * i) + ', 0, 0)'\n      } else {\n        return 'rotate(' + (180 + barwide * barSpace * i) + ', 0, 0)'\n      }\n    })\n    .attr('fill', 'none')\n    .style('stroke-dasharray', '1, 4')\n    .attr('stroke', function (d) {\n      return colTHEME(d.value)\n    })\n    .attr('stroke-width', strokeMin)\n    .attr('height', maxBar)\n\n  let rectTheme = gthe\n    .selectAll('.rectTHE')\n    .data((d) => d.children)\n    .join('rect')\n    .attr('class', function (d) {\n      theVals.push(d.total)\n      return 'rectTHE'\n    })\n    .attr('width', barwide)\n    .attr('stroke', function (d) {\n      return colTHEME(d.value)\n    })\n    .attr('fill', function (d) {\n      if (d.value > 0) {\n        return colTHEME(d.value)\n      } else {\n        return 'black'\n      }\n    })\n    .attr('x', function (d) {\n      let radiusHere\n      for (let i = 0; i < lengths.length; i++) {\n        if (d.parent == lengths[i].name) {\n          radiusHere = radiusScale(lengths[i].num)\n        }\n      }\n      return originX + radiusHere * Math.sin(0)\n    })\n    .attr('y', function (d) {\n      let radiusHere\n      for (let i = 0; i < lengths.length; i++) {\n        if (d.parent == lengths[i].name) {\n          radiusHere = radiusScale(lengths[i].num)\n        }\n      }\n      return originX + radiusHere * Math.cos(0)\n    })\n    .attr('transform', function (d, i) {\n      if (d.parent == 'collab field') {\n        return 'rotate(' + (180 + barwide * barSpaceCo * i) + ', 0, 0)'\n      }\n      if (\n        d.parent == 'domain' ||\n        d.parent == 'outputs' ||\n        d.parent == 'audiences'\n      ) {\n        return 'rotate(' + (180 + barwide * barSpaceCd * i) + ', 0, 0)'\n      }\n      if (d.parent == 'topics' || d.parent == 'collab type') {\n        return 'rotate(' + (180 + barwide * barSpaceTo * i) + ', 0, 0)'\n      } else {\n        return 'rotate(' + (180 + barwide * barSpace * i) + ', 0, 0)'\n      }\n    })\n    .attr('height', 0)\n    .attr('stroke-width', function (d) {\n      if (d.value > 0) {\n        return strokeHighlight\n      } else {\n        return strokeNormal\n      }\n    })\n    .on('mouseenter', mouseEnterTH)\n    .on('mouseleave', mouseLeave)\n\n  maxTheme = d3.max(theVals)\n  maxTotal = sdata[2].responses\n\n  if (maxTotal > 0) {\n    if (maxTheme > maxId) {\n      barScale.domain([0, maxTheme])\n    } else {\n      barScale.domain([0, maxId])\n    }\n    // barScale.domain([0, maxTotal])\n    rectIdentity\n      .transition()\n      .duration(4000)\n      .attr('height', function (d, i) {\n        return barScale(d.total)\n      })\n    rectTheme\n      .transition()\n      .duration(4000)\n      .attr('height', function (d, i) {\n        return barScale(d.total)\n      })\n  }\n\n  const qArray = [\n    'self-ethicist',\n    'others-ethicist',\n    'paid work',\n    'years in field',\n    'education',\n    'career path',\n    'domain',\n    'topics',\n    'outputs',\n    'audiences',\n    'collab type',\n    'collab field',\n  ]\n  const origQArray = [\n    'do you see yourself as an ethicist?',\n    'do your colleagues see you as an ethicist?',\n    'are you paid for your work on AI/data ethics?',\n    'how many years have you been in the field of AI ethics?',\n    'which fields are closest to your education or training?',\n    'what best describes where you are in your career?',\n    'is there a particular domain you look at?',\n    'how would you define the broad topic?',\n    'what outputs is this work producing?',\n    'who is the audience of your work?',\n    'do you collaborate with others in this work?',\n    'who else is involved in your work on this theme?',\n  ]\n\n\n  function mouseEnterID(event, d) {\n    d3.select(this).attr('stroke-width', strokeHighlight * 4)\n    tooltip.transition()\n     .duration(200)\n     .style('opacity', .9)\n     .style('left', (event.pageX) + 'px')\n     .style('top', (event.pageY - 28) + 'px');\n\n    let addText = []\n    if (d.total == 1) {\n      addText.push('<br/>'+d.total + ' respondent chose this answer')\n    }\n    if (d.total > 1) {\n      addText.push('<br/>'+d.total + ' total respondents chose this answer')\n    }\n    if (d.total < 1) {\n      addText.push('No one has chosen this answer so far')\n    }\n\n    let qName\n    for (let i = 0; i < qArray.length; i++) {\n      if (d.parent == qArray[i]) {\n        qName = origQArray[i]\n      }\n    }\n    addText.push('<br/>Question: ' + qName)\n    if (d.value > 0) {\n      addText.push('<br/>This was your answer: ' + d.name)\n    }\n    if (d.value == 0) {\n      addText.push('<br/>This answer: ' + d.name)\n    }\n    tooltip.html(addText.join(''))\n  }\n\n  function mouseEnterTH(event, d) {\n    d3.select(this).attr('stroke-width', strokeHighlight * 4)\n\n    tooltip.transition()\n     .duration(200)\n     .style('opacity', .9)\n     .style('left', (event.pageX) + 'px')\n     .style('top', (event.pageY - 28) + 'px');\n\n    let addText = []\n    if (d.total == 1) {\n      addText.push('<br/>'+d.total + ' respondent chose this answer')\n    }\n    if (d.total > 1) {\n      addText.push('<br/>'+d.total + ' total respondents chose this answer')\n    }\n    if (d.total < 1) {\n      addText.push('<br/>'+'No one has chosen this answer so far')\n    }\n\n    let qName\n    for (let i = 0; i < qArray.length; i++) {\n      if (d.parent == qArray[i]) {\n        qName = origQArray[i]\n      }\n    }\n    addText.push('<br/>Question: ' + qName)\n    if (d.value > 0) {\n      addText.push('<br/>Your answer was: ' + d.name)\n    }\n    if (d.value == 0) {\n      addText.push('<br/>This answer: ' + d.name)\n    }\n    if (d.value > 0 && d.value < 12) {\n       addText.push('<br/>This was your answer for work theme ' + d.value)\n    }\n    if (d.value == 12) {\n      addText.push('<br/>This was your answer for work themes 1 and 2')\n    }\n    if (d.value == 13) {\n      addText.push('<br/>This was your answer for work themes 1 and 3')\n    }\n    if (d.value == 23) {\n      addText.push('<br/>This was your answer for work themes 2 and 3')\n    }\n    if (d.value == 123) {\n      addText.push('<br/>This was your answer for work themes 1, 2 and 3')\n    } else {\n    }\n    tooltip.html(addText.join(''))\n  }\n\n\n\n  function mouseLeave(d) {\n    d3.select(this).attr('stroke-width', function (d) {\n      if (d.value > 0) {\n        return strokeHighlight\n      } else {\n        return strokeNormal\n      }\n    })\n    tooltip.transition()\n      .duration(500)\n      .style('opacity', 0);\n  }\n\n  const zoom = d3\n    .zoom()\n    .extent([\n      [0, 0],\n      [width, height],\n    ])\n    .scaleExtent([1, 8])\n    .on('zoom', zoomed)\n\n  svg.call(zoom.scaleBy, 2.1)\n\n  // svg.on('click', reset);\n\n  function zoomed({ transform }) {\n    g.attr('transform', transform)\n  }\n\n  function reset() {\n    svg\n      .transition()\n      .duration(750)\n      .call(\n        zoom.transform,\n        d3.zoomIdentity,\n        d3.zoomTransform(svg.node()).invert([width / 2, height / 2])\n      )\n  }\n\n  const valueline = d3\n    .line()\n    .x(function (d) {\n      return d.x\n    })\n    .y(function (d) {\n      return d.y\n    })\n    .curve(d3.curveCatmullRom.alpha(0))\n\n  g.append('path').data([idLine]).attr('class', 'lineID').attr('d', valueline)\n  g.append('path').data([yearLine]).attr('class', 'yearID').attr('d', valueline)\n  g.append('path')\n    .data([themeLine])\n    .attr('class', 'lineTH')\n    .attr('d', valueline)\n  g.append('path').data([cnctLine]).attr('class', 'lineCN').attr('d', valueline)\n  d3.selectAll('.lineID, .yearID, .lineTH, .lineCN')\n    .attr('fill', 'none')\n    .attr('stroke', 'lightgrey')\n    .style('stroke-dasharray', '1,4')\n    .style('stroke-width', 0.5)\n  d3.selectAll('.innerCirc, .innerCircTheme').attr('stroke-width', 0.3)\n\n  const idText = gid\n    .append('text')\n    .attr('class', 'idText')\n    .attr('font-size', ft)\n    .attr('x', 0)\n    .attr('y', 2)\n    .attr('text-anchor', 'middle')\n    .attr('transform', function (d, i) {\n      return `rotate(${-posID[i].rot},0,0)`\n    })\n    .attr('fill', 'none')\n    .text(function (d, i) {\n      return 1 + i\n    })\n  const themeText = gthe\n    .append('text')\n    .attr('class', 'themeText')\n    .attr('font-size', ft)\n    .attr('x', 0)\n    .attr('y', 2)\n    .attr('text-anchor', 'middle')\n    .attr('transform', function (d, i) {\n      return `rotate(${-posTh[i].rot},0,0)`\n    })\n    .attr('fill', 'none')\n    .text(function (d, i) {\n      return 7 + i\n    })\n  const key = svg\n    .append('image')\n    .attr('class', 'key')\n    .attr('x', width / 15)\n    .attr('y', height - 270)\n    .attr('width', width - width / 15)\n    .attr('height', 0)\n    .attr('xlink:href', 'img/wheel-key-spread.svg')\n\n  d3.select('#self-highlight-off').on('click', function () {\n    d3.selectAll('.rectID, .rectTHE')\n      .transition()\n      .attr('fill', 'black')\n      .transition()\n      .attr('stroke-width', strokeHighlight)\n  })\n  d3.select('#self-highlight-on').on('click', function () {\n    d3.selectAll('.rectID')\n      .transition()\n      .attr('fill', function (d) {\n        if (d.value == 1) {\n          return colID(d.parent)\n        } else {\n          return 'black'\n        }\n      })\n      .transition()\n      .attr('stroke-width', function (d) {\n        if (d.value == 1) {\n          return strokeHighlight\n        } else {\n          return strokeNormal\n        }\n      })\n\n    d3.selectAll('.rectTHE')\n      .transition()\n      .attr('fill', function (d) {\n        if (d.value > 0) {\n          return colTHEME(d.value)\n        } else {\n          return 'black'\n        }\n      })\n      .transition()\n      .attr('stroke-width', function (d) {\n        if (d.value > 0) {\n          return strokeHighlight\n        } else {\n          return strokeNormal\n        }\n      })\n  })\n\n  d3.select('#wheels-labels-on').on('click', function () {\n    d3.selectAll('.lineID, .yearID, .lineTH, .lineCN').attr('opacity', 0.1)\n    d3.selectAll('.innerCirc, .innerCircTheme').attr('opacity', 0.1)\n    d3.selectAll('.rectID, .rectTHE').attr('opacity', '.3')\n    d3.selectAll('.idText, .themeText').attr('fill', 'white')\n    d3.select('.key').transition().attr('height', 300)\n  })\n  d3.select('#wheels-labels-off').on('click', function () {\n    d3.selectAll('.rectID, .rectTHE').attr('opacity', '1')\n    d3.selectAll('.lineID, .yearID, .lineTH, .lineCN').attr('opacity', '.3')\n    d3.selectAll('.innerCirc, .innerCircTheme').attr('opacity', 0.5)\n    d3.selectAll('.idText, .themeText').attr('fill', 'none')\n    d3.select('.key').transition().attr('height', 0)\n  })\n}\n", "// calculateValues :: Object -> String -> Object\nconst calculateValues = (initValues) => (q) => {\n  if (q === null || q === '')\n    return Object.keys(initValues).reduce(\n      (last_obj, key) => ({ ...last_obj, [key]: -1 }), // -1 on all values if skipped question\n      {}\n    )\n  else {\n    const latestChoice = { [q]: 1 } // 1 if picked\n    return { ...initValues, ...latestChoice } // build values with default\n  }\n}\n\n// calculateValuesArray :: Object -> Array -> Object\nconst calculateValuesArray = (initValues) => (q) => {\n  if ((q || []).length === 0)\n    return Object.keys(initValues).reduce(\n      (last_obj, key) => ({ ...last_obj, [key]: -1 }), // -1 on all values if skipped question\n      {}\n    )\n  else {\n    const latestChoice = q.reduce(\n      (last_obj, key) => ({ ...last_obj, [key]: 1 }),\n      {}\n    ) // 1 if picked\n    return { ...initValues, ...latestChoice } // build values with default\n  }\n}\n\n// calculateValuesMultiple :: Object -> (Array,Array,Array) -> Object\nconst calculateValuesMultiple = (initValues) => (q, q2, q3) => {\n  if (\n    (q || []).length === 0 &&\n    (q2 || []).length === 0 &&\n    (q3 || []).length === 0\n  )\n    return Object.keys(initValues).reduce(\n      (last_obj, key) => ({ ...last_obj, [key]: -1 }), // -1 on all values if skipped question\n      {}\n    )\n  else {\n    let latestChoice = {}\n    if (q.length > 0) {\n      q.map((key) => {\n        latestChoice = { ...latestChoice, [key]: 1 }\n      })\n    }\n    if (q2.length > 0) {\n      q2.map((key) => {\n        if (latestChoice.hasOwnProperty(key))\n          latestChoice = {\n            ...latestChoice,\n            [key]: parseInt(`${latestChoice[key]}2`, 10),\n          }\n        else latestChoice = { ...latestChoice, [key]: 2 }\n      })\n    }\n    if (q3.length > 0) {\n      q3.map((key) => {\n        if (latestChoice.hasOwnProperty(key))\n          latestChoice = {\n            ...latestChoice,\n            [key]: parseInt(`${latestChoice[key]}3`, 10),\n          }\n        else latestChoice = { ...latestChoice, [key]: 3 }\n      })\n    }\n\n    return { ...initValues, ...latestChoice } // build values with default\n  }\n}\n\n// calculateValuesMultipleText :: Object -> (String,String,String) -> Object\nconst calculateValuesMultipleText = (initValues) => (q, q2, q3) => {\n  if (\n    (q === null || q === '') &&\n    (q2 === null || q2 === '') &&\n    (q3 === null || q3 === '')\n  )\n    return Object.keys(initValues).reduce(\n      (last_obj, key) => ({ ...last_obj, [key]: -1 }), // -1 on all values if skipped question\n      {}\n    )\n  else {\n    let latestChoice = {}\n    if (q !== null && q !== '') {\n      latestChoice = { ...latestChoice, [q]: 1 }\n    }\n    if (q2 !== null && q2 !== '') {\n      if (latestChoice.hasOwnProperty(q2))\n        latestChoice = {\n          ...latestChoice,\n          [q2]: parseInt(`${latestChoice[q2]}2`, 10),\n        }\n      else latestChoice = { ...latestChoice, [q2]: 2 }\n    }\n    if (q3 !== null && q3 !== '') {\n      if (latestChoice.hasOwnProperty(q3))\n        latestChoice = {\n          ...latestChoice,\n          [q3]: parseInt(`${latestChoice[q3]}3`, 10),\n        }\n      else latestChoice = { ...latestChoice, [q3]: 3 }\n    }\n\n    return { ...initValues, ...latestChoice } // build values with default\n  }\n}\n\n//q70\nexport function getSelfEthicist(latest, data) {\n  const initVal = {\n    Yes: 0,\n    No: 0,\n  }\n\n  const values = calculateValues(initVal)(latest.q70)\n  const template = {\n    q: 'do you identify as an ethicist?',\n    parent: 'self-ethicist',\n  }\n\n  let needDefault = Object.keys(values)\n\n  const generated = data.map(({ answer, count }) => {\n    const val = values[answer]\n    if (typeof val === 'undefined') {\n      throw new Error(\n        `Missing value type, make sure to add all possible values. value searched: (${answer})`\n      )\n    }\n    // removing values which are taken from db\n    needDefault = needDefault.filter((it) => it !== answer)\n\n    return {\n      ...template,\n      value: val,\n      name: answer,\n      total: count,\n    }\n  })\n\n  // In the situation where there are not even 1 answer for certain option,\n  // we need to add default for this option which is not in db\n\n  const defaultOptions = needDefault.map((it) => ({\n    ...template,\n    value: values[it],\n    name: it,\n    total: 0,\n  }))\n\n  return [...generated, ...defaultOptions]\n}\n\n//q71\nexport function getOthersEthicist(latest, data) {\n  const initVal = {\n    Yes: 0,\n    No: 0,\n  }\n\n  const values = calculateValues(initVal)(latest.q71)\n\n  const template = {\n    q: 'do others identify you as an ethicist?',\n    parent: 'others-ethicist',\n  }\n\n  let needDefault = Object.keys(values)\n\n  const generated = data.map(({ answer, count }) => {\n    const val = values[answer]\n    if (typeof val === 'undefined') {\n      throw new Error(\n        `Missing value type, make sure to add all possible values. value searched: (${answer})`\n      )\n    }\n    // removing values which are taken from db\n    needDefault = needDefault.filter((it) => it !== answer)\n\n    return {\n      ...template,\n      value: val,\n      name: answer,\n      total: count,\n    }\n  })\n\n  // In the situation where there are not even 1 answer for certain option,\n  // we need to add default for this option which is not in db\n\n  const defaultOptions = needDefault.map((it) => ({\n    ...template,\n    value: values[it],\n    name: it,\n    total: 0,\n  }))\n\n  return [...generated, ...defaultOptions]\n}\n\n// q14\nexport function getFunding(latest, data) {\n  const initVal = {\n    Yes: 0,\n    No: 0,\n  }\n\n  const values = calculateValues(initVal)(latest.q14)\n\n  const template = {\n    q: 'are you paid for your work on AI/data ethics?',\n    parent: 'paid work',\n  }\n\n  let needDefault = Object.keys(values)\n\n  const generated = data.map(({ answer, count }) => {\n    const val = values[answer]\n    if (typeof val === 'undefined') {\n      throw new Error(\n        `Missing value type, make sure to add all possible values. value searched: (${answer})`\n      )\n    }\n    // removing values which are taken from db\n    needDefault = needDefault.filter((it) => it !== answer)\n\n    return {\n      ...template,\n      value: val,\n      name: answer,\n      total: count,\n    }\n  })\n\n  // In the situation where there are not even 1 answer for certain option,\n  // we need to add default for this option which is not in db\n\n  const defaultOptions = needDefault.map((it) => ({\n    ...template,\n    value: values[it],\n    name: it,\n    total: 0,\n  }))\n\n  return [...generated, ...defaultOptions]\n}\n\n// q7\nexport function getYearsInField(latest, data) {\n  const initVal = {\n    1: 0,\n    2: 0,\n    3: 0,\n    4: 0,\n    5: 0,\n    6: 0,\n    7: 0,\n    8: 0,\n    9: 0,\n    10: 0,\n    11: 0,\n    12: 0,\n    13: 0,\n    14: 0,\n    15: 0,\n    16: 0,\n    17: 0,\n    18: 0,\n    19: 0,\n    20: 0,\n    21: 0,\n    22: 0,\n    23: 0,\n    24: 0,\n    25: 0,\n    26: 0,\n    27: 0,\n    28: 0,\n    29: 0,\n    30: 0,\n    31: 0,\n    32: 0,\n    33: 0,\n    34: 0,\n    35: 0,\n    36: 0,\n    37: 0,\n    38: 0,\n    39: 0,\n    40: 0,\n    41: 0,\n    42: 0,\n    43: 0,\n    44: 0,\n    45: 0,\n    46: 0,\n    47: 0,\n    48: 0,\n    49: 0,\n    50: 0,\n    '50+': 0,\n  }\n\n  const values = calculateValues(initVal)(latest.q7)\n\n  const template = {\n    q: 'years',\n    parent: 'years in field',\n  }\n\n  let needDefault = Object.keys(values)\n\n  const generated = data.map(({ answer, count }) => {\n    const val = values[answer]\n    if (typeof val === 'undefined') {\n      throw new Error(\n        `Missing value type, make sure to add all possible values. value searched: (${answer})`\n      )\n    }\n    // removing values which are taken from db\n    needDefault = needDefault.filter((it) => it !== answer)\n\n    return {\n      ...template,\n      value: val,\n      name: answer,\n      total: count,\n    }\n  })\n\n  // In the situation where there are not even 1 answer for certain option,\n  // we need to add default for this option which is not in db\n\n  const defaultOptions = needDefault.map((it) => ({\n    ...template,\n    value: values[it],\n    name: it,\n    total: 0,\n  }))\n\n  return [...generated, ...defaultOptions]\n}\n\n// q9\nexport function getEducation(latest, data) {\n  const initVal = {\n    '#agriculture': 0,\n    '#architecture': 0,\n    '#biology': 0,\n    '#business': 0,\n    '#computer science': 0,\n    '#data science': 0,\n    '#design & art': 0,\n    '#economics': 0,\n    '#education': 0,\n    '#engineering & technology': 0,\n    '#health': 0,\n    '#history': 0,\n    '#information management': 0,\n    '#languages': 0,\n    '#law': 0,\n    '#mathematics': 0,\n    '#media': 0,\n    '#environmental science': 0,\n    '#politics': 0,\n    '#psychology': 0,\n    '#philosophy': 0,\n    '#social sciences': 0,\n    '#sports': 0,\n    '#other': 0,\n  }\n  const values = calculateValuesArray(initVal)(latest.q9) // q9 is Array\n\n  const template = {\n    q: 'education',\n    parent: 'education',\n  }\n\n  let needDefault = Object.keys(values)\n\n  const generated = data.map(({ answer, count }) => {\n    const val = values[answer]\n    if (typeof val === 'undefined') {\n      throw new Error(\n        `Missing value type, make sure to add all possible values. value searched: (${answer})`\n      )\n    }\n    // removing values which are taken from db\n    needDefault = needDefault.filter((it) => it !== answer)\n\n    return {\n      ...template,\n      value: val,\n      name: answer,\n      total: count,\n    }\n  })\n\n  // In the situation where there are not even 1 answer for certain option,\n  // we need to add default for this option which is not in db\n\n  const defaultOptions = needDefault.map((it) => ({\n    ...template,\n    value: values[it],\n    name: it,\n    total: 0,\n  }))\n\n  return [...generated, ...defaultOptions].map((it) => ({\n    ...it,\n    name: it.name.replace('#', ''),\n  }))\n}\n\n// q65\nexport function getCareer(latest, data) {\n  const initVal = {\n    'Undergraduate student': 0,\n    'Masters student': 0,\n    'PhD student': 0,\n    Postdoc: 0,\n    'University faculty': 0,\n    'Industry employee': 0,\n    'Government employee': 0,\n    'Non-profit employee': 0,\n    'Other: (please describe below)': 0,\n  }\n\n  const values = calculateValues(initVal)(latest.q65)\n\n  const template = {\n    q: 'career',\n    parent: 'career path',\n  }\n\n  let needDefault = Object.keys(values)\n\n  const generated = data.map(({ answer, count }) => {\n    const val = values[answer]\n    if (typeof val === 'undefined') {\n      throw new Error(\n        `Missing value type, make sure to add all possible values. value searched: (${answer})`\n      )\n    }\n    // removing values which are taken from db\n    needDefault = needDefault.filter((it) => it !== answer)\n\n    return {\n      ...template,\n      value: val,\n      name: answer,\n      total: count,\n    }\n  })\n\n  // In the situation where there are not even 1 answer for certain option,\n  // we need to add default for this option which is not in db\n\n  const defaultOptions = needDefault.map((it) => ({\n    ...template,\n    value: values[it],\n    name: it,\n    total: 0,\n  }))\n\n  return [...generated, ...defaultOptions].map((it) => ({\n    ...it,\n    name: it.name === 'Other: (please describe below)' ? 'Other' : it.name,\n  }))\n}\n\n// q30 q133 q149\nexport function getTopics(latest, data) {\n  const initVal = {\n    '#bias': 0,\n    '#fairness': 0,\n    '#accountability': 0,\n    '#transparency': 0,\n    '#explainability': 0,\n    other: 0,\n  }\n\n  const values = calculateValuesMultiple(initVal)(\n    latest.q30,\n    latest.q133,\n    latest.q149\n  )\n\n  const template = {\n    q: 'topic',\n    parent: 'topics',\n  }\n\n  let needDefault = Object.keys(values)\n\n  const generated = data.map(({ answer, count }) => {\n    const val = values[answer]\n    if (typeof val === 'undefined') {\n      throw new Error(\n        `Missing value type, make sure to add all possible values. value searched: (${answer})`\n      )\n    }\n    // removing values which are taken from db\n    needDefault = needDefault.filter((it) => it !== answer)\n\n    return {\n      ...template,\n      value: val,\n      name: answer,\n      total: count,\n    }\n  })\n\n  // In the situation where there are not even 1 answer for certain option,\n  // we need to add default for this option which is not in db\n\n  const defaultOptions = needDefault.map((it) => ({\n    ...template,\n    value: values[it],\n    name: it,\n    total: 0,\n  }))\n\n  return [...generated, ...defaultOptions].map((it) => ({\n    ...it,\n    name: it.name.replace('#', ''),\n  }))\n}\n\n// q33 q139 q155\nexport function getDomain(latest, data) {\n  const initVal = {\n    health: 0,\n    finance: 0,\n    'urban dynamics': 0,\n    transport: 0,\n    military: 0,\n    'social media': 0,\n    'welfare and social care': 0,\n    policing: 0,\n    'judicial system': 0,\n    accessibility: 0,\n    education: 0,\n    other: 0,\n    'N/A': 0,\n  }\n\n  const values = calculateValuesMultiple(initVal)(\n    latest.q33,\n    latest.q139,\n    latest.q155\n  )\n\n  const template = {\n    q: 'domain',\n    parent: 'domain',\n  }\n\n  let needDefault = Object.keys(values)\n\n  const generated = data.map(({ answer, count }) => {\n    const val = values[answer]\n    if (typeof val === 'undefined') {\n      throw new Error(\n        `Missing value type, make sure to add all possible values. value searched: (${answer})`\n      )\n    }\n    // removing values which are taken from db\n    needDefault = needDefault.filter((it) => it !== answer)\n\n    return {\n      ...template,\n      value: val,\n      name: answer,\n      total: count,\n    }\n  })\n\n  // In the situation where there are not even 1 answer for certain option,\n  // we need to add default for this option which is not in db\n\n  const defaultOptions = needDefault.map((it) => ({\n    ...template,\n    value: values[it],\n    name: it,\n    total: 0,\n  }))\n\n  return [...generated, ...defaultOptions]\n  //     .map((it) => ({\n  //     ...it,\n  //     name: it.name.replace('#', ''),\n  // }))\n}\n\n// q37 q143 q159\nexport function getOutput(latest, data) {\n  const initVal = {\n    '#academic papers': 0,\n    '#reports': 0,\n    '#policy-papers': 0,\n    '#policy briefing': 0,\n    '#blog posts': 0,\n    '#exhibitions': 0,\n    '#events': 0,\n    '#datasets': 0,\n    '#website': 0,\n    '#code repository': 0,\n    '#software application': 0,\n    '#other': 0,\n  }\n\n  const values = calculateValuesMultiple(initVal)(\n    latest.q37,\n    latest.q143,\n    latest.q159\n  )\n\n  const template = {\n    q: 'output',\n    parent: 'outputs',\n  }\n\n  let needDefault = Object.keys(values)\n\n  const generated = data.map(({ answer, count }) => {\n    const val = values[answer]\n    if (typeof val === 'undefined') {\n      throw new Error(\n        `Missing value type, make sure to add all possible values. value searched: (${answer})`\n      )\n    }\n    // removing values which are taken from db\n    needDefault = needDefault.filter((it) => it !== answer)\n\n    return {\n      ...template,\n      value: val,\n      name: answer,\n      total: count,\n    }\n  })\n\n  // In the situation where there are not even 1 answer for certain option,\n  // we need to add default for this option which is not in db\n\n  const defaultOptions = needDefault.map((it) => ({\n    ...template,\n    value: values[it],\n    name: it,\n    total: 0,\n  }))\n\n  return [...generated, ...defaultOptions].map((it) => ({\n    ...it,\n    name: it.name.replace('#', ''),\n  }))\n}\n\n// q51 q144 q160\nexport function getAudience(latest, data) {\n  const initVal = {\n    '#internal audience': 0,\n    '#academics': 0,\n    '#think tanks': 0,\n    '#NGOs': 0,\n    '#government institutions': 0,\n    '#artists': 0,\n    '#designers': 0,\n    '#industry': 0,\n    '#community organizations': 0,\n    '#general public': 0,\n    '#other': 0,\n  }\n\n  const values = calculateValuesMultiple(initVal)(\n    latest.q51,\n    latest.q144,\n    latest.q160\n  )\n\n  const template = {\n    q: 'audience',\n    parent: 'audiences',\n  }\n\n  let needDefault = Object.keys(values)\n\n  const generated = data.map(({ answer, count }) => {\n    const val = values[answer]\n    if (typeof val === 'undefined') {\n      throw new Error(\n        `Missing value type, make sure to add all possible values. value searched: (${answer})`\n      )\n    }\n    // removing values which are taken from db\n    needDefault = needDefault.filter((it) => it !== answer)\n\n    return {\n      ...template,\n      value: val,\n      name: answer,\n      total: count,\n    }\n  })\n\n  // In the situation where there are not even 1 answer for certain option,\n  // we need to add default for this option which is not in db\n\n  const defaultOptions = needDefault.map((it) => ({\n    ...template,\n    value: values[it],\n    name: it,\n    total: 0,\n  }))\n\n  return [...generated, ...defaultOptions].map((it) => ({\n    ...it,\n    name: it.name.replace('#', ''),\n  }))\n}\n\n// q35 q141 q157\nexport function getCollabType(latest, data) {\n  const initVal = {\n    'Yes, within my organization': 0,\n    'Yes, with others outside my organization': 0,\n    'Yes, both within and outside my organization': 0,\n    No: 0,\n  }\n\n  const values = calculateValuesMultipleText(initVal)(\n    latest.q35,\n    latest.q141,\n    latest.q157\n  )\n\n  const template = {\n    q: 'collab type?',\n    parent: 'collab type',\n  }\n\n  let needDefault = Object.keys(values)\n\n  const generated = data.map(({ answer, count }) => {\n    const val = values[answer]\n    if (typeof val === 'undefined') {\n      throw new Error(\n        `Missing value type, make sure to add all possible values. value searched: (${answer})`\n      )\n    }\n    // removing values which are taken from db\n    needDefault = needDefault.filter((it) => it !== answer)\n\n    return {\n      ...template,\n      value: val,\n      name: answer,\n      total: count,\n    }\n  })\n\n  // In the situation where there are not even 1 answer for certain option,\n  // we need to add default for this option which is not in db\n\n  const defaultOptions = needDefault.map((it) => ({\n    ...template,\n    value: values[it],\n    name: it,\n    total: 0,\n  }))\n\n  return [...generated, ...defaultOptions]\n}\n\n// q36 q142 q158\nexport function getCollabField(latest, data) {\n  const initVal = {\n    'Researchers - Social Science': 0,\n    'Researchers - Humanities': 0,\n    'Researchers - Law': 0,\n    'Researchers - Medicine': 0,\n    'Researchers - Science': 0,\n    'Artists and creative practitioners': 0,\n    'Computer/Data Scientists': 0,\n    'Tech developers and Engineers': 0,\n    'General public': 0,\n    Regulators: 0,\n    NGOs: 0,\n    'Affected individuals': 0,\n    'Government officials': 0,\n    'Community organizations': 0,\n    'Industry representatives': 0,\n    'Others:': 0,\n  }\n\n  const values = calculateValuesMultiple(initVal)(\n    latest.q36,\n    latest.q142,\n    latest.q158\n  )\n\n  const template = {\n    q: 'collab field?',\n    parent: 'collab field',\n  }\n\n  let needDefault = Object.keys(values)\n\n  const generated = data.map(({ answer, count }) => {\n    const val = values[answer]\n    if (typeof val === 'undefined') {\n      throw new Error(\n        `Missing value type, make sure to add all possible values. value searched: (${answer})`\n      )\n    }\n    // removing values which are taken from db\n    needDefault = needDefault.filter((it) => it !== answer)\n\n    return {\n      ...template,\n      value: val,\n      name: answer,\n      total: count,\n    }\n  })\n\n  // In the situation where there are not even 1 answer for certain option,\n  // we need to add default for this option which is not in db\n\n  const defaultOptions = needDefault.map((it) => ({\n    ...template,\n    value: values[it],\n    name: it,\n    total: 0,\n  }))\n\n  return [...generated, ...defaultOptions].map((it) => ({\n    ...it,\n    name: it.name === 'Others:' ? 'Other' : it.name,\n  }))\n}\n", "import { createClient } from '../_snowpack/pkg/@supabase/supabase-js.js'\nimport { dendro } from './dendro.js'\nimport { wheel } from './wheels.js'\nimport {\n  getSelfEthicist,\n  getOthersEthicist,\n  getFunding,\n  getYearsInField,\n  getEducation,\n  getCareer,\n  getTopics,\n  getDomain,\n  getOutput,\n  getAudience,\n  getCollabType,\n  getCollabField,\n} from './reshape-data.js'\n\nconst SUPABASE_URL = 'https://qqvziidjcugzwycwavta.supabase.co'\nconst SUPABASE_PUBLIC_KEY =\n  'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYyMzY2NTk5NSwiZXhwIjoxOTM5MjQxOTk1fQ.L4M9hdUoYh3gPHKH0P4-QErYOBOL8R2eggSeNBAHTTY'\n\nconst api = createClient(SUPABASE_URL, SUPABASE_PUBLIC_KEY)\nlet INITGRAPH = true\n\n// check for email / id\nconst urlparams = new URLSearchParams(document.location.search.substring(1))\n\nconst getEmail = () => {\n  const emailURI = urlparams.get('email')\n  if (emailURI && emailURI !== 'undefined' && emailURI !== 'null')\n    return decodeURIComponent(emailURI)\n  else return false\n}\n\nconst getID = () => {\n  const idURI = urlparams.get('id')\n  if (idURI && idURI !== 'undefined' && idURI !== 'null')\n    return decodeURIComponent(idURI)\n  else return false\n}\n\nconst email = getEmail()\nconst id = getID()\n\nif (!(email || id)) {\n  INITGRAPH = false\n}\n\nconst init = async () => {\n  // get latest count\n  const { error, count } = await api\n    .from('count_without_q3_no')\n    .select('id', { count: 'exact' })\n\n  // subscribe on latest survey answers\n\n  const subHandler = (payload) => {\n    const docErrs = document.getElementsByClassName('error-msg')\n    for (const doc of docErrs) {\n      doc.hidden = true\n    }\n    triggerGeneratingJson(payload.new)\n      .then((data) => {\n        dendro(data, INITGRAPH)\n        return data\n      })\n      .then((data) => {\n        wheel(data, INITGRAPH)\n        if (!INITGRAPH) INITGRAPH = false\n        return data\n      })\n      .catch(console.error) // with latest data object\n  }\n  const subscription =\n    email || id\n      ? email\n        ? api\n            .from(`data:email=eq.${email}`)\n            .on('INSERT', subHandler)\n            .subscribe()\n        : api\n            .from(`data:response_id=eq.${id}`)\n            .on('INSERT', subHandler)\n            .subscribe()\n      : api.from('data').on('INSERT', subHandler).subscribe()\n\n  // get pre-generated json\n  // if we have email or id return nothing, so we force download from API\n  const oldData =\n    email || id\n      ? false\n      : await fetch('./data/data.json')\n          .then((it) => it.json())\n          .catch((it) => false)\n\n  if (!oldData || oldData.children[2].responses !== count) {\n    if (!oldData && !(email || id)) {\n      INITGRAPH = true // in case we don't have oldData and we are waiting on root,\n      // so websoket can initialize\n      // the next one will crash anyway\n    }\n    const dataP =\n      email || id // check if we need to narrow down to email/id\n        ? email\n          ? api.from('data').select().eq('email', email).limit(1).single()\n          : api.from('data').select().eq('response_id', id).limit(1).single()\n        : api\n            .from('data')\n            .select()\n            .order('created_time', { ascending: false })\n            .limit(1)\n            .single() // pull the most receant\n\n    const { data: data, error: err } = await dataP\n    if (err) {\n      if (\n        err.message === 'JSON object requested, multiple (or no) rows returned'\n      ) {\n        // show pretty that we did not find user yet, but viz will appear when we receive response\n        // it could be alse that we cannot find email nor id\n        const docErrs = document.getElementsByClassName('error-msg')\n        for (const doc of docErrs) {\n          doc.innerHTML = `<div class=\"row error-msg-content\">\n                            <p class=\"col-12\" >Were receiving your survey data from the survey provider.</br>Please wait.</p>\n                            <i class=\"col-12 spin bi bi-arrow-repeat\"></i>\n                            <p class=\"col-12\" >It might take a minute.</br>You can use the mean time to get familiar with the project</p>\n                           </div>`\n        }\n      }\n      console.error(err)\n      return\n    }\n    triggerGeneratingJson(data)\n      .then((data) => {\n        dendro(data, INITGRAPH)\n        return data\n      })\n      .then((data) => {\n        wheel(data, INITGRAPH)\n        INITGRAPH = false\n        return data\n      })\n\n      .catch(console.error) // initial trigger\n  }\n\n  // remove subscription if user is about to close the window\n  window.addEventListener('beforeunload', function (event) {\n    api.removeSubscription(subscription)\n    return event\n  })\n}\n\nconst triggerGeneratingJson = async (data, cnt) => {\n  const q70P = api.from('group_by_70').select()\n  const q71P = api.from('group_by_71').select()\n  const q65P = api.from('group_by_65').select()\n  const q14P = api.from('group_by_14').select()\n  const q7P = api.from('group_by_7').select()\n  const q9P = api.from('group_by_9').select()\n\n  const q30q133q149P = api.from('group_by_30_133_149').select()\n  const q33q139q155P = api.from('group_by_33_139_155').select()\n  const q37q143q159P = api.from('group_by_37_143_159').select()\n  const q51q144q160P = api.from('group_by_51_144_160').select()\n  const q35q141q157P = api.from('group_by_35_141_157').select()\n  const q36q142q158P = api.from('group_by_36_142_158').select()\n\n  // await the promises\n  // data :: Object\n  let count = cnt\n  if (!count) {\n    const { error: err1, count: countNew } = await api\n      .from('count_without_q3_no')\n      .select('id', { count: 'exact' })\n    if (err1) {\n      console.error('API-ERROR:\\n', err1)\n      return\n    }\n    count = countNew\n  }\n  const { data: q70, error: err2 } = await q70P\n  const { data: q71, error: err3 } = await q71P\n  const { data: q65, error: err4 } = await q65P\n  const { data: q14, error: err5 } = await q14P\n  const { data: q7, error: err6 } = await q7P\n  const { data: q9, error: err7 } = await q9P\n\n  const { data: q30_q133_q149, error: err8 } = await q30q133q149P\n  const { data: q33_q139_q155, error: err9 } = await q33q139q155P\n  const { data: q37_q143_q159, error: err10 } = await q37q143q159P\n  const { data: q51_q144_q160, error: err11 } = await q51q144q160P\n  const { data: q35_q141_q157, error: err12 } = await q35q141q157P\n  const { data: q36_q142_q158, error: err13 } = await q36q142q158P\n\n  const error =\n    err2 ||\n    err3 ||\n    err4 ||\n    err5 ||\n    err6 ||\n    err7 ||\n    err8 ||\n    err9 ||\n    err10 ||\n    err11 ||\n    err12 ||\n    err13\n\n  if (error) {\n    console.error('API-ERROR:\\n', error)\n    return\n  }\n\n  // identity\n  const selfEthicist = getSelfEthicist(data, q70) //::Array\n  const othersEthicist = getOthersEthicist(data, q71) //::Array\n  const funding = getFunding(data, q14) //::Array\n  const yearsInField = getYearsInField(data, q7) //::Array\n  const education = getEducation(data, q9) //::Array\n  const career = getCareer(data, q65) //::Array\n\n  // theme\n  const topic = getTopics(data, q30_q133_q149) //::Array\n  const domain = getDomain(data, q33_q139_q155) //::Array\n  const output = getOutput(data, q37_q143_q159) //::Array\n  const audience = getAudience(data, q51_q144_q160) //::Array\n  const collabtype = getCollabType(data, q35_q141_q157) //::Array\n  const collabfield = getCollabField(data, q36_q142_q158) //::Array\n\n  return {\n    name: '',\n    children: [\n      {\n        name: 'identity',\n        children: [\n          { name: 'self-ethicist', children: selfEthicist },\n          { name: 'others-ethicist', children: othersEthicist },\n          { name: 'paid work', children: funding },\n          { name: 'years in field', children: yearsInField },\n          { name: 'education', children: education },\n          { name: 'career path', children: career },\n        ],\n      },\n      {\n        name: 'theme',\n        children: [\n          { name: 'topics', children: topic },\n          { name: 'domain', children: domain },\n          { name: 'outputs', children: output },\n          { name: 'audiences', children: audience },\n          { name: 'collab type', children: collabtype },\n          { name: 'collab field', children: collabfield },\n        ],\n      },\n      { responses: count },\n    ],\n  }\n}\n\nif (!(email || id)) {\n  document.getElementById(\n    'text-intro-1sec'\n  ).innerText = `Using the information shared, we have created visual representations of research interests and perspectives in the field of AI and data ethics.`\n  document.getElementById(\n    'text-2section-your'\n  ).innerText = `Here is a different visualization of the latest response among all of the responses to the survey thus far. Rather than viewing these visualizations as static networks showing links between nodes, lets interpret the response as part of a social process that defines the research we conduct in the field of data and AI ethics. By sharing perspectives, one position in this network will change in relation to other perspectives.`\n  document.getElementById('text-your-headline').innerText = 'Latest'\n  const docYours = document.getElementsByClassName('text-your')\n  for (const el of docYours) {\n    el.innerText = 'the latest'\n  }\n\n  const docHideShowEl = document.getElementsByClassName('text-hide-section')\n  for (const el of docHideShowEl) {\n    el.innerText = 'the most recent response.'\n  }\n\n  const docDelete = document.getElementsByClassName('text-delete')\n  for (const el of docDelete) {\n    el.innerText = ''\n  }\n  //\n}\n\ninit().catch(console.error)\n\nif (window.innerWidth < 768) {\n  $('#sizeModal').modal('toggle')\n}\n"],
  "mappings": "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",
  "names": []
}
