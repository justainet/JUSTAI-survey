var Bt=document.getElementById("fingerprint"),L=Bt.getBoundingClientRect(),Wt=L.left,Zt=L.top,G=L.width,Ht=L.height,ct=G/1.665,jt=d3.cluster().size([2*Math.PI,ct-100]),Rt=["#4EA8BA","#4EA8BA","#46AAB3","#7B9FE3","#9A99FF","#65A4CF"],b=["self-ethicist","others-ethicist","paid work","years in field","education","career path"],St=["#CB9AC6","#FDCC9A","#B668AA","#D66B6E","#DC9AA2","#8B6BAA","#EB9C84","#CB9AC6"],Nt=[0,1,2,3,12,23,13,123],ut=["topics","domain","outputs","audiences","collab type","collab field"],dt=d3.scaleOrdinal().domain(b).range(Rt),ht=d3.scaleOrdinal().domain(Nt).range(St);function ft(s,D){let f;D?f=d3.selectAll(".fingerprint-container").append("svg").attr("width",G).attr("height",Ht).append("g").attr("transform","translate("+G/2+","+ct/1.2+")"):f=d3.selectAll(".fingerprint-container").selectAll("svg").selectAll("g");let[x,P,c]=s.children,p={...s,children:[x,P]},u=d3.hierarchy(p),l=jt(u);D?f.append("g").attr("fill","none").attr("class","thedraw").selectAll("path").data(l.links()).join("path").attr("class","drawing").attr("stroke-width",function(n){return n.target.data.value!=null&&n.target.data.value<1?1:1.5}).attr("d",d3.linkRadial().angle(function(n){return n.x}).radius(function(n){return n.y})).attr("stroke-opacity",function(n){return n.target.data.value>0?1:.5}).attr("stroke",function(n){if(n.target.data.value>=0){for(let a=0;a<b.length;a++)if(n.source.data.name==b[a])return dt(n.source.data.name);for(let a=0;a<b.length;a++)if(n.source.data.name==ut[a])return ht(n.target.data.value)}else return"lightgrey"}):f.selectAll("g.thedraw").selectAll("path").data(l.links()).join("path").attr("class","drawing").attr("stroke-width",function(n){return n.target.data.value!=null&&n.target.data.value<1?1:1.5}).attr("d",d3.linkRadial().angle(function(n){return n.x}).radius(function(n){return n.y})).attr("stroke-opacity",function(n){return n.target.data.value>0?1:.5}).attr("stroke",function(n){if(n.target.data.value>=0){for(let a=0;a<b.length;a++)if(n.source.data.name==b[a])return dt(n.source.data.name);for(let a=0;a<b.length;a++)if(n.source.data.name==ut[a])return ht(n.target.data.value)}else return"lightgrey"}),f.selectAll("g").selectAll("circle").remove(),f.append("g").selectAll("circle").data(l.descendants()).join("circle").filter(function(n){return n.data.value>0}).attr("transform",n=>`
          rotate(${n.x*180/Math.PI-90})
          translate(${n.y},0)
        `).attr("fill","white").attr("opacity",.7).attr("r",2.5).attr("class",function(n){return n.data.name}),D&&f.append("g").attr("font-size",10).attr("stroke-linejoin","round").attr("stroke-width",3).selectAll("text").data(l.descendants()).join("text").filter(function(n){return n.children}).attr("class","dendroText").attr("transform",n=>`
          rotate(${n.x*180/Math.PI-90})
          translate(${n.y},0) 
          rotate(${n.x>=Math.PI?180:0})
        `).attr("dy","0.31em").attr("x",n=>n.x<Math.PI==!n.children?6:-6).attr("text-anchor",n=>n.x<Math.PI==!n.children?"start":"end").attr("fill",function(n){if(n.children)return"none"}).text(n=>n.data.name).clone(!0).lower()}d3.selectAll(".dendro-labels-on").on("click",function(){d3.selectAll(".dendroText").transition().attr("fill","white")});d3.selectAll(".dendro-labels-off").on("click",function(){d3.selectAll(".dendroText").transition().attr("fill","none")});var $t=document.getElementById("wheel-container"),{width:w,height:T}=$t.getBoundingClientRect();var M=d3.select("#tooltip").style("opacity",0);function pt(s,D){d3.select("#wheel-container").selectAll("svg").remove();let f=d3.select("#wheel-container").append("svg").attr("width",w).attr("height",T).attr("viewBox",[0,0,w,T]),x=f.append("g"),P=2,c=w/15,p=T/14,u=w/2-c*2.2,l=T/P,a=w/40/2,J=40,E=7.5,B=E*4,gt=["#4EA8BA","#4EA8BA","#46AAB3","#7B9FE3","#9A99FF","#65A4CF"],yt=["self-ethicist","others-ethicist","paid work","years in field","education","career path"],wt=["#CB9AC6","#FDCC9A","#B668AA","#D66B6E","#DC9AA2","#8B6BAA","#EB9C84","#CB9AC6"],xt=[0,1,2,3,12,23,13,123],k=.5,C=.2,K=.2,H=d3.scaleOrdinal().domain(yt).range(gt),j=d3.scaleOrdinal().domain(xt).range(wt),m=[{x:u+c+a*2,y:l-p-a,rot:15,id:"self-ethicist"},{x:u+c-a,y:l-p-a*3,rot:350,id:"others-ethicist"},{x:u+c+a*2,y:l-a,rot:80,id:"paid work"},{x:u-c/2,y:l+p/2-a,rot:180,id:"years in field"},{x:u+c*2,y:l+p,rot:80,id:"education"},{x:u-c/2,y:l-p-a*3,rot:250,id:"career path"}],g=[{x:u+c*3,y:l-p-a*3,rot:300,id:"topics"},{x:u+c*3+a,y:l-p-a,rot:80,id:"domain"},{x:u+c*4.5,y:l+p/2,rot:65,id:"outputs"},{x:u+c*4.9,y:l+p/2+B*1.5,rot:70,id:"audiences"},{x:u+c*4.6,y:l-p-a*4,rot:300,id:"collab type"},{x:u+c*5,y:l-p-a*3,rot:40,id:"collab field"}],At=[m[5],m[1],m[0],m[2],m[4]],kt=[g[5],g[4],g[0],g[1],g[2],g[3]],vt=[m[0],g[0]],bt=[m[3],m[0]],A=0,I=0,W=[],Z=[],U=0,X,Y=0,R=d3.scaleLinear().domain([0,U]).range([1,B]),S=52,_=d3.scaleLinear().domain([0,S]).range([0,360]),O=d3.scaleLinear().domain([0,100]).range([5,.5]),y=d3.scaleLinear().domain([2,52]).range([E,J]),i=3,tt=E+2,N=3,et=3,rt=4,nt=6,at=5,ot=E,d=J/1.8,o=[],Q=8;function Pt(t,e=Q){let r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.278125,.278125,.35625,.55625,.55625,.890625,.6671875,.1921875,.334375,.334375,.390625,.584375,.278125,.334375,.278125,.303125,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.278125,.278125,.5859375,.584375,.5859375,.55625,1.015625,.6671875,.6671875,.7234375,.7234375,.6671875,.6109375,.778125,.7234375,.278125,.5,.6671875,.55625,.834375,.7234375,.778125,.6671875,.778125,.7234375,.6671875,.6109375,.7234375,.6671875,.9453125,.6671875,.6671875,.6109375,.278125,.35625,.278125,.478125,.55625,.334375,.55625,.55625,.5,.55625,.55625,.278125,.55625,.55625,.2234375,.2421875,.5,.2234375,.834375,.55625,.55625,.55625,.55625,.334375,.5,.278125,.55625,.5,.7234375,.5,.5,.5,.35625,.2609375,.3546875,.590625],v=.5293256578947368;return t.split("").map(h=>h.charCodeAt(0)<r.length?r[h.charCodeAt(0)]:v).reduce((h,Et)=>Et+h)*e}let V=s.children,$=x.selectAll(".gID").data(V[0].children).join("g").attr("class",function(t,e){return t.name}).attr("transform",function(t,e){if(m[e].id==t.name)return`translate(${m[e].x}, ${m[e].y}), rotate(${m[e].rot},0,0)`}),Ut=$.append("circle").attr("class","innerCirc").attr("cx",0).attr("cy",0).attr("r",function(t){return o.push({name:t.name,num:t.children.length}),t.name=="years in field"?d:y(t.children.length)}).attr("fill","none").attr("stroke","lightgrey"),q=x.selectAll(".gTHE").data(V[1].children).join("g").attr("class",function(t){return t.name}).attr("transform",function(t,e){return`translate(${g[e].x}, ${g[e].y}), rotate(${g[e].rot},0,0)`}),Xt=q.append("circle").attr("class","innerCircTheme").attr("cx",A).attr("cy",I).attr("r",function(t){return o.push({name:t.name,num:t.children.length}),y(t.children.length)}).attr("fill","none").attr("stroke","lightgrey"),Yt=$.selectAll(".rectMaxID").data(t=>t.children).join("rect").attr("class","rectMaxID").attr("width",function(t,e){return t.q=="years"&&d>0?O(S):i}).attr("x",function(t){let e;for(let r=0;r<o.length;r++)t.parent==o[r].name&&(e=y(o[r].num));return t.q=="years"&&d>0?A+d*Math.sin(0):A+e*Math.sin(0)}).attr("y",function(t){let e;for(let r=0;r<o.length;r++)t.parent==o[r].name&&(e=y(o[r].num));return t.q=="years"&&d>0?I+d*Math.cos(0):I+e*Math.cos(0)}).attr("transform",function(t,e){return t.q=="years"&&d>0?"rotate("+_(e)+", 0, 0)":t.parent=="education"?"rotate("+(180+i*et*e)+", 0, 0)":t.parent=="career path"?"rotate("+(180+i*nt*e)+", 0, 0)":t.parent=="self-ethicist"||t.parent=="others-ethicist"||t.parent=="paid work"?"rotate("+(180+i*tt*e)+", 0, 0)":"rotate("+(180+i*N*e)+", 0, 0)"}).attr("fill","none").style("stroke-dasharray","1, 4").attr("stroke",function(t){return H(t.parent)}).attr("stroke-width",K).attr("height",B),Tt=$.selectAll(".rectID").data(t=>t.children).join("rect").attr("class",function(t,e){return W.push(t.total),"rectID"}).attr("width",function(t,e){return t.q=="years"&&d>0?O(S):i}).attr("fill",function(t){return t.value==1?H(t.parent):"black"}).attr("stroke",function(t){return H(t.parent)}).attr("stroke-width",function(t){return t.value==1?k:C}).attr("x",function(t){let e;for(let r=0;r<o.length;r++)t.parent==o[r].name&&(e=y(o[r].num));return t.q=="years"&&d>0?A+d*Math.sin(0):A+e*Math.sin(0)}).attr("y",function(t){let e;for(let r=0;r<o.length;r++)t.parent==o[r].name&&(e=y(o[r].num));return t.q=="years"&&d>0?I+d*Math.cos(0):I+e*Math.cos(0)}).attr("transform",function(t,e){return t.q=="years"&&d>0?"rotate("+_(e)+", 0, 0)":t.parent=="education"?"rotate("+(180+i*et*e)+", 0, 0)":t.parent=="career path"?"rotate("+(180+i*nt*e)+", 0, 0)":t.parent=="self-ethicist"||t.parent=="others-ethicist"||t.parent=="paid work"?"rotate("+(180+i*tt*e)+", 0, 0)":"rotate("+(180+i*N*e)+", 0, 0)"}).attr("height",0).on("mouseenter",It).on("mouseleave",st);Y=d3.max(W);let Ot=q.selectAll(".rectMaxTH").data(t=>t.children).join("rect").attr("class","rectMaxTH").attr("width",function(t,e){return t.q=="years"&&d>0?O(S):i}).attr("fill","none").attr("x",function(t){let e;for(let r=0;r<o.length;r++)t.parent==o[r].name&&(e=y(o[r].num));return A+e*Math.sin(0)}).attr("y",function(t){let e;for(let r=0;r<o.length;r++)t.parent==o[r].name&&(e=y(o[r].num));return A+e*Math.cos(0)}).attr("transform",function(t,e){return t.parent=="collab field"?"rotate("+(180+i*rt*e)+", 0, 0)":t.parent=="domain"||t.parent=="outputs"||t.parent=="audiences"?"rotate("+(180+i*at*e)+", 0, 0)":t.parent=="topics"||t.parent=="collab type"?"rotate("+(180+i*ot*e)+", 0, 0)":"rotate("+(180+i*N*e)+", 0, 0)"}).attr("fill","none").style("stroke-dasharray","1, 4").attr("stroke",function(t){return j(t.value)}).attr("stroke-width",K).attr("height",B),Ct=q.selectAll(".rectTHE").data(t=>t.children).join("rect").attr("class",function(t){return Z.push(t.total),"rectTHE"}).attr("width",i).attr("stroke",function(t){return j(t.value)}).attr("fill",function(t){return t.value>0?j(t.value):"black"}).attr("x",function(t){let e;for(let r=0;r<o.length;r++)t.parent==o[r].name&&(e=y(o[r].num));return A+e*Math.sin(0)}).attr("y",function(t){let e;for(let r=0;r<o.length;r++)t.parent==o[r].name&&(e=y(o[r].num));return A+e*Math.cos(0)}).attr("transform",function(t,e){return t.parent=="collab field"?"rotate("+(180+i*rt*e)+", 0, 0)":t.parent=="domain"||t.parent=="outputs"||t.parent=="audiences"?"rotate("+(180+i*at*e)+", 0, 0)":t.parent=="topics"||t.parent=="collab type"?"rotate("+(180+i*ot*e)+", 0, 0)":"rotate("+(180+i*N*e)+", 0, 0)"}).attr("height",0).attr("stroke-width",function(t){return t.value>0?k:C}).on("mouseenter",Mt).on("mouseleave",st);X=d3.max(Z),U=V[2].responses,U>0&&(X>Y?R.domain([0,X]):R.domain([0,Y]),Tt.transition().duration(4e3).attr("height",function(t,e){return R(t.total)}),Ct.transition().duration(4e3).attr("height",function(t,e){return R(t.total)}));let F=["self-ethicist","others-ethicist","paid work","years in field","education","career path","domain","topics","outputs","audiences","collab type","collab field"],it=["do you see yourself as an ethicist?","do your colleagues see you as an ethicist?","are you paid for your work on AI/data ethics?","how many years have you been in the field of AI ethics?","which fields are closest to your education or training?","what best describes where you are in your career?","is there a particular domain you look at?","how would you define the broad topic?","what outputs is this work producing?","who is the audience of your work?","do you collaborate with others in this work?","who else is involved in your work on this theme?"];function It(t,e){d3.select(this).attr("stroke-width",k*4),M.transition().duration(200).style("opacity",.9).style("left",t.pageX+"px").style("top",t.pageY-28+"px");let r=[];e.total==1&&r.push("<br/>"+e.total+" respondent chose this answer"),e.total>1&&r.push("<br/>"+e.total+" total respondents chose this answer"),e.total<1&&r.push("No one has chosen this answer so far");let v;for(let h=0;h<F.length;h++)e.parent==F[h]&&(v=it[h]);r.push("<br/>Question: "+v),e.value>0&&r.push("<br/>This was your answer: "+e.name),e.value==0&&r.push("<br/>This answer: "+e.name),M.html(r.join(""))}function Mt(t,e){d3.select(this).attr("stroke-width",k*4),M.transition().duration(200).style("opacity",.9).style("left",t.pageX+"px").style("top",t.pageY-28+"px");let r=[];e.total==1&&r.push("<br/>"+e.total+" respondent chose this answer"),e.total>1&&r.push("<br/>"+e.total+" total respondents chose this answer"),e.total<1&&r.push("<br/>No one has chosen this answer so far");let v;for(let h=0;h<F.length;h++)e.parent==F[h]&&(v=it[h]);r.push("<br/>Question: "+v),e.value>0&&r.push("<br/>Your answer was: "+e.name),e.value==0&&r.push("<br/>This answer: "+e.name),e.value>0&&e.value<12&&r.push("<br/>This was your answer for work theme "+e.value),e.value==12&&r.push("<br/>This was your answer for work themes 1 and 2"),e.value==13&&r.push("<br/>This was your answer for work themes 1 and 3"),e.value==23&&r.push("<br/>This was your answer for work themes 2 and 3"),e.value==123&&r.push("<br/>This was your answer for work themes 1, 2 and 3"),M.html(r.join(""))}function st(t){d3.select(this).attr("stroke-width",function(e){return e.value>0?k:C}),M.transition().duration(500).style("opacity",0)}let lt=d3.zoom().extent([[0,0],[w,T]]).scaleExtent([1,8]).on("zoom",Dt);f.call(lt.scaleBy,2.1);function Dt({transform:t}){x.attr("transform",t)}function Qt(){f.transition().duration(750).call(lt.transform,d3.zoomIdentity,d3.zoomTransform(f.node()).invert([w/2,T/2]))}let z=d3.line().x(function(t){return t.x}).y(function(t){return t.y}).curve(d3.curveCatmullRom.alpha(0));x.append("path").data([At]).attr("class","lineID").attr("d",z),x.append("path").data([bt]).attr("class","yearID").attr("d",z),x.append("path").data([kt]).attr("class","lineTH").attr("d",z),x.append("path").data([vt]).attr("class","lineCN").attr("d",z),d3.selectAll(".lineID, .yearID, .lineTH, .lineCN").attr("fill","none").attr("stroke","lightgrey").style("stroke-dasharray","1,4").style("stroke-width",.5),d3.selectAll(".innerCirc, .innerCircTheme").attr("stroke-width",.3);let Vt=$.append("text").attr("class","idText").attr("font-size",Q).attr("x",0).attr("y",2).attr("text-anchor","middle").attr("transform",function(t,e){return`rotate(${-m[e].rot},0,0)`}).attr("fill","none").text(function(t,e){return 1+e}),Gt=q.append("text").attr("class","themeText").attr("font-size",Q).attr("x",0).attr("y",2).attr("text-anchor","middle").attr("transform",function(t,e){return`rotate(${-g[e].rot},0,0)`}).attr("fill","none").text(function(t,e){return 7+e}),Jt=f.append("image").attr("class","key").attr("x",w/15).attr("y",T-270).attr("width",w-w/15).attr("height",0).attr("xlink:href","img/wheel-key-spread.svg");d3.select("#self-highlight-off").on("click",function(){d3.selectAll(".rectID, .rectTHE").transition().attr("fill","black").transition().attr("stroke-width",k)}),d3.select("#self-highlight-on").on("click",function(){d3.selectAll(".rectID").transition().attr("fill",function(t){return t.value==1?H(t.parent):"black"}).transition().attr("stroke-width",function(t){return t.value==1?k:C}),d3.selectAll(".rectTHE").transition().attr("fill",function(t){return t.value>0?j(t.value):"black"}).transition().attr("stroke-width",function(t){return t.value>0?k:C})}),d3.select("#wheels-labels-on").on("click",function(){d3.selectAll(".lineID, .yearID, .lineTH, .lineCN").attr("opacity",.1),d3.selectAll(".innerCirc, .innerCircTheme").attr("opacity",.1),d3.selectAll(".rectID, .rectTHE").attr("opacity",".3"),d3.selectAll(".idText, .themeText").attr("fill","white"),d3.select(".key").transition().attr("height",300)}),d3.select("#wheels-labels-off").on("click",function(){d3.selectAll(".rectID, .rectTHE").attr("opacity","1"),d3.selectAll(".lineID, .yearID, .lineTH, .lineCN").attr("opacity",".3"),d3.selectAll(".innerCirc, .innerCircTheme").attr("opacity",.5),d3.selectAll(".idText, .themeText").attr("fill","none"),d3.select(".key").transition().attr("height",0)})}var mt=new URLSearchParams(document.location.search.substring(1)),qt=()=>{let s=mt.get("email");return s&&s!=="undefined"&&s!=="null"?decodeURIComponent(s):!1},Ft=()=>{let s=mt.get("id");return s&&s!=="undefined"&&s!=="null"?decodeURIComponent(s):!1},zt=qt(),Lt=Ft();zt||Lt||d3.json("./data/data.json").then(function(s){ft(s,!0),pt(s,!0)}).catch(console.error);
//# sourceMappingURL=viz-init.js.map
